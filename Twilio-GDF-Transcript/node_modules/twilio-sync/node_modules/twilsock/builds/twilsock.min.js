/*
@license
The following license applies to all parts of this software except as
documented below.

    Copyright (c) 2016, Twilio, inc.
    All rights reserved.

    Redistribution and use in source and binary forms, with or without
    modification, are permitted provided that the following conditions are
    met:

      1. Redistributions of source code must retain the above copyright
         notice, this list of conditions and the following disclaimer.

      2. Redistributions in binary form must reproduce the above copyright
         notice, this list of conditions and the following disclaimer in
         the documentation and/or other materials provided with the
         distribution.

      3. Neither the name of Twilio nor the names of its contributors may
         be used to endorse or promote products derived from this software
         without specific prior written permission.

    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
    "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
    LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
    A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
    HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
    SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
    LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
    DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
    THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
    (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
    OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

This software includes javascript-state-machine under the following license.

    Copyright (c) 2012, 2013, 2014, 2015, Jake Gordon and contributors

    Permission is hereby granted, free of charge, to any person obtaining a copy
    of this software and associated documentation files (the "Software"), to deal
    in the Software without restriction, including without limitation the rights
    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the Software is
    furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in all
    copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE

This software includes loglevel under the following license.

    Copyright (c) 2013 Tim Perry

    Permission is hereby granted, free of charge, to any person
    obtaining a copy of this software and associated documentation
    files (the "Software"), to deal in the Software without
    restriction, including without limitation the rights to use,
    copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the
    Software is furnished to do so, subject to the following
    conditions:

    The above copyright notice and this permission notice shall be
    included in all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
    EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
    OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
    NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
    HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
    WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
    FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
    OTHER DEALINGS IN THE SOFTWARE.


*/
this.Twilio=this.Twilio||{},this.Twilio.Twilsock=function(t){"use strict";var e=void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},r=function(t){return t&&t.Math==Math&&t},o=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n&&n)||function(){return this}()||Function("return this")(),i={},a=function(t){try{return!!t()}catch(t){return!0}},s=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),c={},u={}.propertyIsEnumerable,f=Object.getOwnPropertyDescriptor,l=f&&!u.call({1:2},1);c.f=l?function(t){var e=f(this,t);return!!e&&e.enumerable}:u;var h,p,d=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},v={}.toString,y=function(t){return v.call(t).slice(8,-1)},g=y,m="".split,b=a((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==g(t)?m.call(t,""):Object(t)}:Object,w=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},x=b,k=w,S=function(t){return x(k(t))},T=function(t){return"object"==typeof t?null!==t:"function"==typeof t},E=o,O=function(t){return"function"==typeof t?t:void 0},A=function(t,e){return arguments.length<2?O(E[t]):E[t]&&E[t][e]},R=A("navigator","userAgent")||"",_=o,C=R,P=_.process,I=_.Deno,j=P&&P.versions||I&&I.version,M=j&&j.v8;M?p=(h=M.split("."))[0]<4?1:h[0]+h[1]:C&&(!(h=C.match(/Edge\/(\d+)/))||h[1]>=74)&&(h=C.match(/Chrome\/(\d+)/))&&(p=h[1]);var L=p&&+p,N=L,D=a,B=!!Object.getOwnPropertySymbols&&!D((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&N&&N<41})),F=B&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,U=A,W=F?function(t){return"symbol"==typeof t}:function(t){var e=U("Symbol");return"function"==typeof e&&Object(t)instanceof e},z=T,G={exports:{}},$=o,V=function(t,e){try{Object.defineProperty($,t,{value:e,configurable:!0,writable:!0})}catch(n){$[t]=e}return e},K=V,Y="__core-js_shared__",q=o[Y]||K(Y,{}),X=q;(G.exports=function(t,e){return X[t]||(X[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.17.3",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"});var J=w,H=function(t){return Object(J(t))},Z=H,Q={}.hasOwnProperty,tt=Object.hasOwn||function(t,e){return Q.call(Z(t),e)},et=0,nt=Math.random(),rt=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++et+nt).toString(36)},ot=o,it=G.exports,at=tt,st=rt,ct=B,ut=F,ft=it("wks"),lt=ot.Symbol,ht=ut?lt:lt&&lt.withoutSetter||st,pt=function(t){return at(ft,t)&&(ct||"string"==typeof ft[t])||(ct&&at(lt,t)?ft[t]=lt[t]:ft[t]=ht("Symbol."+t)),ft[t]},dt=T,vt=W,yt=function(t,e){var n,r;if("string"===e&&"function"==typeof(n=t.toString)&&!z(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!z(r=n.call(t)))return r;if("string"!==e&&"function"==typeof(n=t.toString)&&!z(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},gt=pt("toPrimitive"),mt=function(t,e){if(!dt(t)||vt(t))return t;var n,r=t[gt];if(void 0!==r){if(void 0===e&&(e="default"),n=r.call(t,e),!dt(n)||vt(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===e&&(e="number"),yt(t,e)},bt=mt,wt=W,xt=function(t){var e=bt(t,"string");return wt(e)?e:String(e)},kt=T,St=o.document,Tt=kt(St)&&kt(St.createElement),Et=function(t){return Tt?St.createElement(t):{}},Ot=Et,At=!s&&!a((function(){return 7!=Object.defineProperty(Ot("div"),"a",{get:function(){return 7}}).a})),Rt=s,_t=c,Ct=d,Pt=S,It=xt,jt=tt,Mt=At,Lt=Object.getOwnPropertyDescriptor;i.f=Rt?Lt:function(t,e){if(t=Pt(t),e=It(e),Mt)try{return Lt(t,e)}catch(t){}if(jt(t,e))return Ct(!_t.f.call(t,e),t[e])};var Nt={},Dt=T,Bt=function(t){if(!Dt(t))throw TypeError(String(t)+" is not an object");return t},Ft=s,Ut=At,Wt=Bt,zt=xt,Gt=Object.defineProperty;Nt.f=Ft?Gt:function(t,e,n){if(Wt(t),e=zt(e),Wt(n),Ut)try{return Gt(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var $t=Nt,Vt=d,Kt=s?function(t,e,n){return $t.f(t,e,Vt(1,n))}:function(t,e,n){return t[e]=n,t},Yt={exports:{}},qt=q,Xt=Function.toString;"function"!=typeof qt.inspectSource&&(qt.inspectSource=function(t){return Xt.call(t)});var Jt,Ht,Zt,Qt=qt.inspectSource,te=Qt,ee=o.WeakMap,ne="function"==typeof ee&&/native code/.test(te(ee)),re=G.exports,oe=rt,ie=re("keys"),ae=function(t){return ie[t]||(ie[t]=oe(t))},se={},ce=ne,ue=T,fe=Kt,le=tt,he=q,pe=ae,de=se,ve="Object already initialized",ye=o.WeakMap;if(ce||he.state){var ge=he.state||(he.state=new ye),me=ge.get,be=ge.has,we=ge.set;Jt=function(t,e){if(be.call(ge,t))throw new TypeError(ve);return e.facade=t,we.call(ge,t,e),e},Ht=function(t){return me.call(ge,t)||{}},Zt=function(t){return be.call(ge,t)}}else{var xe=pe("state");de[xe]=!0,Jt=function(t,e){if(le(t,xe))throw new TypeError(ve);return e.facade=t,fe(t,xe,e),e},Ht=function(t){return le(t,xe)?t[xe]:{}},Zt=function(t){return le(t,xe)}}var ke={set:Jt,get:Ht,has:Zt,enforce:function(t){return Zt(t)?Ht(t):Jt(t,{})},getterFor:function(t){return function(e){var n;if(!ue(e)||(n=Ht(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},Se=o,Te=Kt,Ee=tt,Oe=V,Ae=Qt,Re=ke.get,_e=ke.enforce,Ce=String(String).split("String");(Yt.exports=function(t,e,n,r){var o,i=!!r&&!!r.unsafe,a=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||Ee(n,"name")||Te(n,"name",e),(o=_e(n)).source||(o.source=Ce.join("string"==typeof e?e:""))),t!==Se?(i?!s&&t[e]&&(a=!0):delete t[e],a?t[e]=n:Te(t,e,n)):a?t[e]=n:Oe(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&Re(this).source||Ae(this)}));var Pe={},Ie=Math.ceil,je=Math.floor,Me=function(t){return isNaN(t=+t)?0:(t>0?je:Ie)(t)},Le=Me,Ne=Math.min,De=function(t){return t>0?Ne(Le(t),9007199254740991):0},Be=Me,Fe=Math.max,Ue=Math.min,We=function(t,e){var n=Be(t);return n<0?Fe(n+e,0):Ue(n,e)},ze=S,Ge=De,$e=We,Ve=function(t){return function(e,n,r){var o,i=ze(e),a=Ge(i.length),s=$e(r,a);if(t&&n!=n){for(;a>s;)if((o=i[s++])!=o)return!0}else for(;a>s;s++)if((t||s in i)&&i[s]===n)return t||s||0;return!t&&-1}},Ke={includes:Ve(!0),indexOf:Ve(!1)},Ye=tt,qe=S,Xe=Ke.indexOf,Je=se,He=function(t,e){var n,r=qe(t),o=0,i=[];for(n in r)!Ye(Je,n)&&Ye(r,n)&&i.push(n);for(;e.length>o;)Ye(r,n=e[o++])&&(~Xe(i,n)||i.push(n));return i},Ze=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Qe=He,tn=Ze.concat("length","prototype");Pe.f=Object.getOwnPropertyNames||function(t){return Qe(t,tn)};var en={};en.f=Object.getOwnPropertySymbols;var nn,rn=Pe,on=en,an=Bt,sn=A("Reflect","ownKeys")||function(t){var e=rn.f(an(t)),n=on.f;return n?e.concat(n(t)):e},cn=tt,un=sn,fn=i,ln=Nt,hn=function(t,e){for(var n=un(e),r=ln.f,o=fn.f,i=0;i<n.length;i++){var a=n[i];cn(t,a)||r(t,a,o(e,a))}},pn=a,dn=/#|\.prototype\./,vn=function(t,e){var n=gn[yn(t)];return n==bn||n!=mn&&("function"==typeof e?pn(e):!!e)},yn=vn.normalize=function(t){return String(t).replace(dn,".").toLowerCase()},gn=vn.data={},mn=vn.NATIVE="N",bn=vn.POLYFILL="P",wn=vn,xn=o,kn=i.f,Sn=Kt,Tn=Yt.exports,En=V,On=hn,An=wn,Rn=function(t,e){var n,r,o,i,a,s=t.target,c=t.global,u=t.stat;if(n=c?xn:u?xn[s]||En(s,{}):(xn[s]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(a=kn(n,r))&&a.value:n[r],!An(c?r:s+(u?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;On(i,o)}(t.sham||o&&o.sham)&&Sn(i,"sham",!0),Tn(n,r,i,t)}},_n=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Cn=He,Pn=Ze,In=Object.keys||function(t){return Cn(t,Pn)},jn=Nt,Mn=Bt,Ln=In,Nn=s?Object.defineProperties:function(t,e){Mn(t);for(var n,r=Ln(e),o=r.length,i=0;o>i;)jn.f(t,n=r[i++],e[n]);return t},Dn=A("document","documentElement"),Bn=Bt,Fn=Nn,Un=Ze,Wn=se,zn=Dn,Gn=Et,$n=ae("IE_PROTO"),Vn=function(){},Kn=function(t){return"<script>"+t+"</"+"script>"},Yn=function(t){t.write(Kn("")),t.close();var e=t.parentWindow.Object;return t=null,e},qn=function(){try{nn=new ActiveXObject("htmlfile")}catch(t){}var t,e;qn="undefined"!=typeof document?document.domain&&nn?Yn(nn):((e=Gn("iframe")).style.display="none",zn.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Kn("document.F=Object")),t.close(),t.F):Yn(nn);for(var n=Un.length;n--;)delete qn.prototype[Un[n]];return qn()};Wn[$n]=!0;var Xn=Object.create||function(t,e){var n;return null!==t?(Vn.prototype=Bn(t),n=new Vn,Vn.prototype=null,n[$n]=t):n=qn(),void 0===e?n:Fn(n,e)},Jn=_n,Hn=T,Zn=[].slice,Qn={},tr=function(t,e,n){if(!(e in Qn)){for(var r=[],o=0;o<e;o++)r[o]="a["+o+"]";Qn[e]=Function("C,a","return new C("+r.join(",")+")")}return Qn[e](t,n)},er=Function.bind||function(t){var e=Jn(this),n=Zn.call(arguments,1),r=function(){var o=n.concat(Zn.call(arguments));return this instanceof r?tr(e,o.length,o):e.apply(t,o)};return Hn(e.prototype)&&(r.prototype=e.prototype),r},nr=Rn,rr=_n,or=Bt,ir=T,ar=Xn,sr=er,cr=a,ur=A("Reflect","construct"),fr=cr((function(){function t(){}return!(ur((function(){}),[],t)instanceof t)})),lr=!cr((function(){ur((function(){}))})),hr=fr||lr;function pr(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function dr(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){pr(i,r,o,a,s,"next",t)}function s(t){pr(i,r,o,a,s,"throw",t)}a(void 0)}))}}function vr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yr(t,e,n){return e&&vr(t.prototype,e),n&&vr(t,n),t}function gr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mr(t){return(mr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function br(t,e,n){return(br="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mr(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function wr(t,e){return(wr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wr(t,e)}function kr(t){return(kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sr(t,e){return!e||"object"!==kr(e)&&"function"!=typeof e?gr(t):e}function Tr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Er(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}nr({target:"Reflect",stat:!0,forced:hr,sham:hr},{construct:function(t,e){rr(t),or(e);var n=arguments.length<3?t:rr(arguments[2]);if(lr&&!fr)return ur(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(sr.apply(t,r))}var o=n.prototype,i=ar(ir(o)?o:Object.prototype),a=Function.apply.call(t,i,e);return ir(a)?a:i}});var Or,Ar=Object.prototype,Rr=Ar.hasOwnProperty,_r="function"==typeof Symbol?Symbol:{},Cr=_r.iterator||"@@iterator",Pr=_r.asyncIterator||"@@asyncIterator",Ir=_r.toStringTag||"@@toStringTag";function jr(t,e,n,r){var o=e&&e.prototype instanceof Ur?e:Ur,i=Object.create(o.prototype),a=new Qr(r||[]);return i._invoke=function(t,e,n){var r=Lr;return function(o,i){if(r===Dr)throw new Error("Generator is already running");if(r===Br){if("throw"===o)throw i;return eo()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=Jr(a,n);if(s){if(s===Fr)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===Lr)throw r=Br,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=Dr;var c=Mr(t,e,n);if("normal"===c.type){if(r=n.done?Br:Nr,c.arg===Fr)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=Br,n.method="throw",n.arg=c.arg)}}}(t,n,a),i}function Mr(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}var Lr="suspendedStart",Nr="suspendedYield",Dr="executing",Br="completed",Fr={};function Ur(){}function Wr(){}function zr(){}var Gr={};Gr[Cr]=function(){return this};var $r=Object.getPrototypeOf,Vr=$r&&$r($r(to([])));Vr&&Vr!==Ar&&Rr.call(Vr,Cr)&&(Gr=Vr);var Kr=zr.prototype=Ur.prototype=Object.create(Gr);function Yr(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function qr(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===Wr||"GeneratorFunction"===(e.displayName||e.name))}function Xr(t,e){function n(r,o,i,a){var s=Mr(t[r],t,o);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"===kr(u)&&Rr.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,i,a)}),(function(t){n("throw",t,i,a)})):e.resolve(u).then((function(t){c.value=t,i(c)}),(function(t){return n("throw",t,i,a)}))}a(s.arg)}var r;this._invoke=function(t,o){function i(){return new e((function(e,r){n(t,o,e,r)}))}return r=r?r.then(i,i):i()}}function Jr(t,e){var n=t.iterator[e.method];if(n===Or){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=Or,Jr(t,e),"throw"===e.method))return Fr;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return Fr}var r=Mr(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,Fr;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=Or),e.delegate=null,Fr):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,Fr)}function Hr(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function Zr(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Qr(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(Hr,this),this.reset(!0)}function to(t){if(t){var e=t[Cr];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(Rr.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=Or,e.done=!0,e};return r.next=r}}return{next:eo}}function eo(){return{value:Or,done:!0}}Wr.prototype=Kr.constructor=zr,zr.constructor=Wr,zr[Ir]=Wr.displayName="GeneratorFunction",Yr(Xr.prototype),Xr.prototype[Pr]=function(){return this},Yr(Kr),Kr[Ir]="Generator",Kr[Cr]=function(){return this},Kr.toString=function(){return"[object Generator]"},Qr.prototype={constructor:Qr,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=Or,this.done=!1,this.delegate=null,this.method="next",this.arg=Or,this.tryEntries.forEach(Zr),!t)for(var e in this)"t"===e.charAt(0)&&Rr.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=Or)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=Or),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var a=Rr.call(o,"catchLoc"),s=Rr.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&Rr.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,Fr):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),Fr},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),Zr(n),Fr}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;Zr(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:to(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=Or),Fr}};var no={wrap:jr,isGeneratorFunction:qr,AsyncIterator:Xr,mark:function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,zr):(t.__proto__=zr,Ir in t||(t[Ir]="GeneratorFunction")),t.prototype=Object.create(Kr),t},awrap:function(t){return{__await:t}},async:function(t,e,n,r,o){void 0===o&&(o=Promise);var i=new Xr(jr(t,e,n,r),o);return qr(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},keys:function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},values:to},ro=y,oo=Array.isArray||function(t){return"Array"==ro(t)},io=xt,ao=Nt,so=d,co=function(t,e,n){var r=io(e);r in t?ao.f(t,r,so(0,n)):t[r]=n},uo=T,fo=oo,lo=pt("species"),ho=function(t){var e;return fo(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!fo(e.prototype)?uo(e)&&null===(e=e[lo])&&(e=void 0):e=void 0),void 0===e?Array:e},po=function(t,e){return new(ho(t))(0===e?0:e)},vo=a,yo=L,go=pt("species"),mo=function(t){return yo>=51||!vo((function(){var e=[];return(e.constructor={})[go]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},bo=Rn,wo=a,xo=oo,ko=T,So=H,To=De,Eo=co,Oo=po,Ao=mo,Ro=L,_o=pt("isConcatSpreadable"),Co=9007199254740991,Po="Maximum allowed index exceeded",Io=Ro>=51||!wo((function(){var t=[];return t[_o]=!1,t.concat()[0]!==t})),jo=Ao("concat"),Mo=function(t){if(!ko(t))return!1;var e=t[_o];return void 0!==e?!!e:xo(t)};bo({target:"Array",proto:!0,forced:!Io||!jo},{concat:function(t){var e,n,r,o,i,a=So(this),s=Oo(a,0),c=0;for(e=-1,r=arguments.length;e<r;e++)if(Mo(i=-1===e?a:arguments[e])){if(c+(o=To(i.length))>Co)throw TypeError(Po);for(n=0;n<o;n++,c++)n in i&&Eo(s,c,i[n])}else{if(c>=Co)throw TypeError(Po);Eo(s,c++,i)}return s.length=c,s}});var Lo={};Lo[pt("toStringTag")]="z";var No="[object z]"===String(Lo),Do=No,Bo=y,Fo=pt("toStringTag"),Uo="Arguments"==Bo(function(){return arguments}()),Wo=Do?Bo:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Fo))?n:Uo?Bo(e):"Object"==(r=Bo(e))&&"function"==typeof e.callee?"Arguments":r},zo=Wo,Go=No?{}.toString:function(){return"[object "+zo(this)+"]"},$o=No,Vo=Yt.exports,Ko=Go;$o||Vo(Object.prototype,"toString",Ko,{unsafe:!0});var Yo=W,qo=function(t){if(Yo(t))throw TypeError("Cannot convert a Symbol value to a string");return String(t)},Xo=Bt,Jo=function(){var t=Xo(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},Ho=Yt.exports,Zo=Bt,Qo=qo,ti=a,ei=Jo,ni="toString",ri=RegExp.prototype,oi=ri.toString,ii=ti((function(){return"/a/b"!=oi.call({source:"a",flags:"b"})})),ai=oi.name!=ni;(ii||ai)&&Ho(RegExp.prototype,ni,(function(){var t=Zo(this),e=Qo(t.source),n=t.flags;return"/"+e+"/"+Qo(void 0===n&&t instanceof RegExp&&!("flags"in ri)?ei.call(t):n)}),{unsafe:!0});var si=a,ci=function(t,e){var n=[][t];return!!n&&si((function(){n.call(null,e||function(){throw 1},1)}))},ui=Rn,fi=S,li=[].join,hi=b!=Object,pi=ci("join",",");ui({target:"Array",proto:!0,forced:hi||!pi},{join:function(t){return li.call(fi(this),void 0===t?",":t)}});var di=_n,vi=function(t,e,n){if(di(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},yi=vi,gi=b,mi=H,bi=De,wi=po,xi=[].push,ki=function(t){var e=1==t,n=2==t,r=3==t,o=4==t,i=6==t,a=7==t,s=5==t||i;return function(c,u,f,l){for(var h,p,d=mi(c),v=gi(d),y=yi(u,f,3),g=bi(v.length),m=0,b=l||wi,w=e?b(c,g):n||a?b(c,0):void 0;g>m;m++)if((s||m in v)&&(p=y(h=v[m],m,d),t))if(e)w[m]=p;else if(p)switch(t){case 3:return!0;case 5:return h;case 6:return m;case 2:xi.call(w,h)}else switch(t){case 4:return!1;case 7:xi.call(w,h)}return i?-1:r||o?o:w}},Si={forEach:ki(0),map:ki(1),filter:ki(2),some:ki(3),every:ki(4),find:ki(5),findIndex:ki(6),filterReject:ki(7)},Ti=Si.map;function Ei(){}function Oi(){Oi.init.call(this)}function Ai(t){return void 0===t._maxListeners?Oi.defaultMaxListeners:t._maxListeners}function Ri(t,e,n){if(e)t.call(n);else for(var r=t.length,o=Ni(t,r),i=0;i<r;++i)o[i].call(n)}function _i(t,e,n,r){if(e)t.call(n,r);else for(var o=t.length,i=Ni(t,o),a=0;a<o;++a)i[a].call(n,r)}function Ci(t,e,n,r,o){if(e)t.call(n,r,o);else for(var i=t.length,a=Ni(t,i),s=0;s<i;++s)a[s].call(n,r,o)}function Pi(t,e,n,r,o,i){if(e)t.call(n,r,o,i);else for(var a=t.length,s=Ni(t,a),c=0;c<a;++c)s[c].call(n,r,o,i)}function Ii(t,e,n,r){if(e)t.apply(n,r);else for(var o=t.length,i=Ni(t,o),a=0;a<o;++a)i[a].apply(n,r)}function ji(t,e,n,r){var o,i,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=t._events)?(i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]):(i=t._events=new Ei,t._eventsCount=0),a){if("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(o=Ai(t))&&o>0&&a.length>o){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,s=c,"function"==typeof console.warn?console.warn(s):console.log(s)}}else a=i[e]=n,++t._eventsCount;return t}function Mi(t,e,n){var r=!1;function o(){t.removeListener(e,o),r||(r=!0,n.apply(t,arguments))}return o.listener=n,o}function Li(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function Ni(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}Rn({target:"Array",proto:!0,forced:!mo("map")},{map:function(t){return Ti(this,t,arguments.length>1?arguments[1]:void 0)}}),Ei.prototype=Object.create(null),Oi.EventEmitter=Oi,Oi.usingDomains=!1,Oi.prototype.domain=void 0,Oi.prototype._events=void 0,Oi.prototype._maxListeners=void 0,Oi.defaultMaxListeners=10,Oi.init=function(){this.domain=null,Oi.usingDomains&&undefined.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Ei,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Oi.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},Oi.prototype.getMaxListeners=function(){return Ai(this)},Oi.prototype.emit=function(t){var e,n,r,o,i,a,s,c="error"===t;if(a=this._events)c=c&&null==a.error;else if(!c)return!1;if(s=this.domain,c){if(e=arguments[1],!s){if(e instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=s,e.domainThrown=!1,s.emit("error",e),!1}if(!(n=a[t]))return!1;var f="function"==typeof n;switch(r=arguments.length){case 1:Ri(n,f,this);break;case 2:_i(n,f,this,arguments[1]);break;case 3:Ci(n,f,this,arguments[1],arguments[2]);break;case 4:Pi(n,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(r-1),i=1;i<r;i++)o[i-1]=arguments[i];Ii(n,f,this,o)}return!0},Oi.prototype.addListener=function(t,e){return ji(this,t,e,!1)},Oi.prototype.on=Oi.prototype.addListener,Oi.prototype.prependListener=function(t,e){return ji(this,t,e,!0)},Oi.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,Mi(this,t,e)),this},Oi.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,Mi(this,t,e)),this},Oi.prototype.removeListener=function(t,e){var n,r,o,i,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new Ei:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length;i-- >0;)if(n[i]===e||n[i].listener&&n[i].listener===e){a=n[i].listener,o=i;break}if(o<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new Ei,this;delete r[t]}else!function(t,e){for(var n=e,r=n+1,o=t.length;r<o;n+=1,r+=1)t[n]=t[r];t.pop()}(n,o);r.removeListener&&this.emit("removeListener",t,a||e)}return this},Oi.prototype.off=function(t,e){return this.removeListener(t,e)},Oi.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new Ei,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new Ei:delete n[t]),this;if(0===arguments.length){for(var r,o=Object.keys(n),i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new Ei,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1])}while(e[0]);return this},Oi.prototype.listeners=function(t){var e,n=this._events;return n&&(e=n[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):[]},Oi.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):Li.call(t,e)},Oi.prototype.listenerCount=Li,Oi.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var Di={},Bi=Rn,Fi=T,Ui=oo,Wi=We,zi=De,Gi=S,$i=co,Vi=pt,Ki=mo("slice"),Yi=Vi("species"),qi=[].slice,Xi=Math.max;Bi({target:"Array",proto:!0,forced:!Ki},{slice:function(t,e){var n,r,o,i=Gi(this),a=zi(i.length),s=Wi(t,a),c=Wi(void 0===e?a:e,a);if(Ui(i)&&("function"!=typeof(n=i.constructor)||n!==Array&&!Ui(n.prototype)?Fi(n)&&null===(n=n[Yi])&&(n=void 0):n=void 0,n===Array||void 0===n))return qi.call(i,s,c);for(r=new(void 0===n?Array:n)(Xi(c-s,0)),o=0;s<c;s++,o++)s in i&&$i(r,o,i[s]);return r.length=o,r}});var Ji=Bt,Hi=function(t,e,n){var r,o;Ji(t);try{if(void 0===(r=t.return)){if("throw"===e)throw n;return n}r=r.call(t)}catch(t){o=!0,r=t}if("throw"===e)throw n;if(o)throw r;return Ji(r),n},Zi=Bt,Qi=Hi,ta={},ea=ta,na=pt("iterator"),ra=Array.prototype,oa=function(t){return void 0!==t&&(ea.Array===t||ra[na]===t)},ia=Wo,aa=ta,sa=pt("iterator"),ca=function(t){if(null!=t)return t[sa]||t["@@iterator"]||aa[ia(t)]},ua=Bt,fa=ca,la=function(t,e){var n=arguments.length<2?fa(t):e;if("function"!=typeof n)throw TypeError(String(t)+" is not iterable");return ua(n.call(t))},ha=vi,pa=H,da=function(t,e,n,r){try{return r?e(Zi(n)[0],n[1]):e(n)}catch(e){Qi(t,"throw",e)}},va=oa,ya=De,ga=co,ma=la,ba=ca,wa=pt("iterator"),xa=!1;try{var ka=0,Sa={next:function(){return{done:!!ka++}},return:function(){xa=!0}};Sa[wa]=function(){return this},Array.from(Sa,(function(){throw 2}))}catch(t){}var Ta=function(t,e){if(!e&&!xa)return!1;var n=!1;try{var r={};r[wa]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},Ea=function(t){var e,n,r,o,i,a,s=pa(t),c="function"==typeof this?this:Array,u=arguments.length,f=u>1?arguments[1]:void 0,l=void 0!==f,h=ba(s),p=0;if(l&&(f=ha(f,u>2?arguments[2]:void 0,2)),null==h||c==Array&&va(h))for(n=new c(e=ya(s.length));e>p;p++)a=l?f(s[p],p):s[p],ga(n,p,a);else for(i=(o=ma(s,h)).next,n=new c;!(r=i.call(o)).done;p++)a=l?da(o,f,[r.value,p],!0):r.value,ga(n,p,a);return n.length=p,n};Rn({target:"Array",stat:!0,forced:!Ta((function(t){Array.from(t)}))},{from:Ea});var Oa,Aa,Ra,_a=Me,Ca=qo,Pa=w,Ia=function(t){return function(e,n){var r,o,i=Ca(Pa(e)),a=_a(n),s=i.length;return a<0||a>=s?t?"":void 0:(r=i.charCodeAt(a))<55296||r>56319||a+1===s||(o=i.charCodeAt(a+1))<56320||o>57343?t?i.charAt(a):r:t?i.slice(a,a+2):o-56320+(r-55296<<10)+65536}},ja={codeAt:Ia(!1),charAt:Ia(!0)},Ma=!a((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),La=tt,Na=H,Da=Ma,Ba=ae("IE_PROTO"),Fa=Object.prototype,Ua=Da?Object.getPrototypeOf:function(t){return t=Na(t),La(t,Ba)?t[Ba]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Fa:null},Wa=a,za=Ua,Ga=Kt,$a=pt("iterator"),Va=!1;[].keys&&("next"in(Ra=[].keys())?(Aa=za(za(Ra)))!==Object.prototype&&(Oa=Aa):Va=!0),(null==Oa||Wa((function(){var t={};return Oa[$a].call(t)!==t})))&&(Oa={}),"function"!=typeof Oa[$a]&&Ga(Oa,$a,(function(){return this}));var Ka={IteratorPrototype:Oa,BUGGY_SAFARI_ITERATORS:Va},Ya=Nt.f,qa=tt,Xa=pt("toStringTag"),Ja=function(t,e,n){t&&!qa(t=n?t:t.prototype,Xa)&&Ya(t,Xa,{configurable:!0,value:e})},Ha=Ka.IteratorPrototype,Za=Xn,Qa=d,ts=Ja,es=ta,ns=function(){return this},rs=T,os=Bt,is=function(t){if(!rs(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t},as=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return os(n),is(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),ss=Rn,cs=function(t,e,n){var r=e+" Iterator";return t.prototype=Za(Ha,{next:Qa(1,n)}),ts(t,r,!1),es[r]=ns,t},us=Ua,fs=as,ls=Ja,hs=Kt,ps=Yt.exports,ds=ta,vs=Ka.IteratorPrototype,ys=Ka.BUGGY_SAFARI_ITERATORS,gs=pt("iterator"),ms="keys",bs="values",ws="entries",xs=function(){return this},ks=function(t,e,n,r,o,i,a){cs(n,e,r);var s,c,u,f=function(t){if(t===o&&v)return v;if(!ys&&t in p)return p[t];switch(t){case ms:case bs:case ws:return function(){return new n(this,t)}}return function(){return new n(this)}},l=e+" Iterator",h=!1,p=t.prototype,d=p[gs]||p["@@iterator"]||o&&p[o],v=!ys&&d||f(o),y="Array"==e&&p.entries||d;if(y&&(s=us(y.call(new t)))!==Object.prototype&&s.next&&(us(s)!==vs&&(fs?fs(s,vs):"function"!=typeof s[gs]&&hs(s,gs,xs)),ls(s,l,!0)),o==bs&&d&&d.name!==bs&&(h=!0,v=function(){return d.call(this)}),p[gs]!==v&&hs(p,gs,v),ds[e]=v,o)if(c={values:f(bs),keys:i?v:f(ms),entries:f(ws)},a)for(u in c)(ys||h||!(u in p))&&ps(p,u,c[u]);else ss({target:e,proto:!0,forced:ys||h},c);return c},Ss=ja.charAt,Ts=qo,Es=ke,Os=ks,As="String Iterator",Rs=Es.set,_s=Es.getterFor(As);Os(String,"String",(function(t){Rs(this,{type:As,string:Ts(t),index:0})}),(function(){var t,e=_s(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Ss(n,r),e.index+=t.length,{value:t,done:!1})}));var Cs={},Ps=S,Is=Pe.f,js={}.toString,Ms="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];Cs.f=function(t){return Ms&&"[object Window]"==js.call(t)?function(t){try{return Is(t)}catch(t){return Ms.slice()}}(t):Is(Ps(t))};var Ls={},Ns=pt;Ls.f=Ns;var Ds=o,Bs=tt,Fs=Ls,Us=Nt.f,Ws=function(t){var e=Ds.Symbol||(Ds.Symbol={});Bs(e,t)||Us(e,t,{value:Fs.f(t)})},zs=Rn,Gs=o,$s=A,Vs=s,Ks=B,Ys=a,qs=tt,Xs=oo,Js=T,Hs=W,Zs=Bt,Qs=H,tc=S,ec=xt,nc=qo,rc=d,oc=Xn,ic=In,ac=Pe,sc=Cs,cc=en,uc=i,fc=Nt,lc=c,hc=Kt,pc=Yt.exports,dc=G.exports,vc=se,yc=rt,gc=pt,mc=Ls,bc=Ws,wc=Ja,xc=ke,kc=Si.forEach,Sc=ae("hidden"),Tc="Symbol",Ec=gc("toPrimitive"),Oc=xc.set,Ac=xc.getterFor(Tc),Rc=Object.prototype,_c=Gs.Symbol,Cc=$s("JSON","stringify"),Pc=uc.f,Ic=fc.f,jc=sc.f,Mc=lc.f,Lc=dc("symbols"),Nc=dc("op-symbols"),Dc=dc("string-to-symbol-registry"),Bc=dc("symbol-to-string-registry"),Fc=dc("wks"),Uc=Gs.QObject,Wc=!Uc||!Uc.prototype||!Uc.prototype.findChild,zc=Vs&&Ys((function(){return 7!=oc(Ic({},"a",{get:function(){return Ic(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=Pc(Rc,e);r&&delete Rc[e],Ic(t,e,n),r&&t!==Rc&&Ic(Rc,e,r)}:Ic,Gc=function(t,e){var n=Lc[t]=oc(_c.prototype);return Oc(n,{type:Tc,tag:t,description:e}),Vs||(n.description=e),n},$c=function(t,e,n){t===Rc&&$c(Nc,e,n),Zs(t);var r=ec(e);return Zs(n),qs(Lc,r)?(n.enumerable?(qs(t,Sc)&&t[Sc][r]&&(t[Sc][r]=!1),n=oc(n,{enumerable:rc(0,!1)})):(qs(t,Sc)||Ic(t,Sc,rc(1,{})),t[Sc][r]=!0),zc(t,r,n)):Ic(t,r,n)},Vc=function(t,e){Zs(t);var n=tc(e),r=ic(n).concat(Xc(n));return kc(r,(function(e){Vs&&!Kc.call(n,e)||$c(t,e,n[e])})),t},Kc=function(t){var e=ec(t),n=Mc.call(this,e);return!(this===Rc&&qs(Lc,e)&&!qs(Nc,e))&&(!(n||!qs(this,e)||!qs(Lc,e)||qs(this,Sc)&&this[Sc][e])||n)},Yc=function(t,e){var n=tc(t),r=ec(e);if(n!==Rc||!qs(Lc,r)||qs(Nc,r)){var o=Pc(n,r);return!o||!qs(Lc,r)||qs(n,Sc)&&n[Sc][r]||(o.enumerable=!0),o}},qc=function(t){var e=jc(tc(t)),n=[];return kc(e,(function(t){qs(Lc,t)||qs(vc,t)||n.push(t)})),n},Xc=function(t){var e=t===Rc,n=jc(e?Nc:tc(t)),r=[];return kc(n,(function(t){!qs(Lc,t)||e&&!qs(Rc,t)||r.push(Lc[t])})),r};(Ks||(pc((_c=function(){if(this instanceof _c)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?nc(arguments[0]):void 0,e=yc(t),n=function(t){this===Rc&&n.call(Nc,t),qs(this,Sc)&&qs(this[Sc],e)&&(this[Sc][e]=!1),zc(this,e,rc(1,t))};return Vs&&Wc&&zc(Rc,e,{configurable:!0,set:n}),Gc(e,t)}).prototype,"toString",(function(){return Ac(this).tag})),pc(_c,"withoutSetter",(function(t){return Gc(yc(t),t)})),lc.f=Kc,fc.f=$c,uc.f=Yc,ac.f=sc.f=qc,cc.f=Xc,mc.f=function(t){return Gc(gc(t),t)},Vs&&(Ic(_c.prototype,"description",{configurable:!0,get:function(){return Ac(this).description}}),pc(Rc,"propertyIsEnumerable",Kc,{unsafe:!0}))),zs({global:!0,wrap:!0,forced:!Ks,sham:!Ks},{Symbol:_c}),kc(ic(Fc),(function(t){bc(t)})),zs({target:Tc,stat:!0,forced:!Ks},{for:function(t){var e=nc(t);if(qs(Dc,e))return Dc[e];var n=_c(e);return Dc[e]=n,Bc[n]=e,n},keyFor:function(t){if(!Hs(t))throw TypeError(t+" is not a symbol");if(qs(Bc,t))return Bc[t]},useSetter:function(){Wc=!0},useSimple:function(){Wc=!1}}),zs({target:"Object",stat:!0,forced:!Ks,sham:!Vs},{create:function(t,e){return void 0===e?oc(t):Vc(oc(t),e)},defineProperty:$c,defineProperties:Vc,getOwnPropertyDescriptor:Yc}),zs({target:"Object",stat:!0,forced:!Ks},{getOwnPropertyNames:qc,getOwnPropertySymbols:Xc}),zs({target:"Object",stat:!0,forced:Ys((function(){cc.f(1)}))},{getOwnPropertySymbols:function(t){return cc.f(Qs(t))}}),Cc)&&zs({target:"JSON",stat:!0,forced:!Ks||Ys((function(){var t=_c();return"[null]"!=Cc([t])||"{}"!=Cc({a:t})||"{}"!=Cc(Object(t))}))},{stringify:function(t,e,n){for(var r,o=[t],i=1;arguments.length>i;)o.push(arguments[i++]);if(r=e,(Js(e)||void 0!==t)&&!Hs(t))return Xs(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Hs(e))return e}),o[1]=e,Cc.apply(null,o)}});_c.prototype[Ec]||hc(_c.prototype,Ec,_c.prototype.valueOf),wc(_c,Tc),vc[Sc]=!0;var Jc=Rn,Hc=s,Zc=o,Qc=tt,tu=T,eu=Nt.f,nu=hn,ru=Zc.Symbol;if(Hc&&"function"==typeof ru&&(!("description"in ru.prototype)||void 0!==ru().description)){var ou={},iu=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof iu?new ru(t):void 0===t?ru():ru(t);return""===t&&(ou[e]=!0),e};nu(iu,ru);var au=iu.prototype=ru.prototype;au.constructor=iu;var su=au.toString,cu="Symbol(test)"==String(ru("test")),uu=/^Symbol\((.*)\)[^)]+$/;eu(au,"description",{configurable:!0,get:function(){var t=tu(this)?this.valueOf():this,e=su.call(t);if(Qc(ou,t))return"";var n=cu?e.slice(7,-1):e.replace(uu,"$1");return""===n?void 0:n}}),Jc({global:!0,forced:!0},{Symbol:iu})}Ws("iterator");var fu=Xn,lu=Nt,hu=pt("unscopables"),pu=Array.prototype;null==pu[hu]&&lu.f(pu,hu,{configurable:!0,value:fu(null)});var du=function(t){pu[hu][t]=!0},vu=S,yu=du,gu=ta,mu=ke,bu=ks,wu="Array Iterator",xu=mu.set,ku=mu.getterFor(wu),Su=bu(Array,"Array",(function(t,e){xu(this,{type:wu,target:vu(t),index:0,kind:e})}),(function(){var t=ku(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");gu.Arguments=gu.Array,yu("keys"),yu("values"),yu("entries");var Tu={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Eu=Et("span").classList,Ou=Eu&&Eu.constructor&&Eu.constructor.prototype,Au=Ou===Object.prototype?void 0:Ou,Ru=o,_u=Tu,Cu=Au,Pu=Su,Iu=Kt,ju=pt,Mu=ju("iterator"),Lu=ju("toStringTag"),Nu=Pu.values,Du=function(t,e){if(t){if(t[Mu]!==Nu)try{Iu(t,Mu,Nu)}catch(e){t[Mu]=Nu}if(t[Lu]||Iu(t,Lu,e),_u[e])for(var n in Pu)if(t[n]!==Pu[n])try{Iu(t,n,Pu[n])}catch(e){t[n]=Pu[n]}}};for(var Bu in _u)Du(Ru[Bu]&&Ru[Bu].prototype,Bu);Du(Cu,"DOMTokenList");var Fu={exports:{}};!function(t){function e(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=e=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),e(n)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0}(Fu);var Uu=s,Wu=Nt.f,zu=Function.prototype,Gu=zu.toString,$u=/^\s*function ([^ (]*)/,Vu="name";Uu&&!(Vu in zu)&&Wu(zu,Vu,{configurable:!0,get:function(){try{return Gu.call(this).match($u)[1]}catch(t){return""}}});var Ku=T,Yu=Math.floor,qu=function(t){return!Ku(t)&&isFinite(t)&&Yu(t)===t};Rn({target:"Number",stat:!0},{isInteger:qu});var Xu=T,Ju=as,Hu=function(t,e,n){var r,o;return Ju&&"function"==typeof(r=e.constructor)&&r!==n&&Xu(o=r.prototype)&&o!==n.prototype&&Ju(t,o),t},Zu=w,Qu=qo,tf="[\t\n\v\f\r                　\u2028\u2029\ufeff]",ef=RegExp("^"+tf+tf+"*"),nf=RegExp(tf+tf+"*$"),rf=function(t){return function(e){var n=Qu(Zu(e));return 1&t&&(n=n.replace(ef,"")),2&t&&(n=n.replace(nf,"")),n}},of={start:rf(1),end:rf(2),trim:rf(3)},af=s,sf=o,cf=wn,uf=Yt.exports,ff=tt,lf=y,hf=Hu,pf=W,df=mt,vf=a,yf=Xn,gf=Pe.f,mf=i.f,bf=Nt.f,wf=of.trim,xf="Number",kf=sf.Number,Sf=kf.prototype,Tf=lf(yf(Sf))==xf,Ef=function(t){if(pf(t))throw TypeError("Cannot convert a Symbol value to a number");var e,n,r,o,i,a,s,c,u=df(t,"number");if("string"==typeof u&&u.length>2)if(43===(e=(u=wf(u)).charCodeAt(0))||45===e){if(88===(n=u.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+u}for(a=(i=u.slice(2)).length,s=0;s<a;s++)if((c=i.charCodeAt(s))<48||c>o)return NaN;return parseInt(i,r)}return+u};if(cf(xf,!kf(" 0o1")||!kf("0b1")||kf("+0x1"))){for(var Of,Af=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof Af&&(Tf?vf((function(){Sf.valueOf.call(n)})):lf(n)!=xf)?hf(new kf(Ef(e)),n,Af):Ef(e)},Rf=af?gf(kf):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),_f=0;Rf.length>_f;_f++)ff(kf,Of=Rf[_f])&&!ff(Af,Of)&&bf(Af,Of,mf(kf,Of));Af.prototype=Sf,Sf.constructor=Af,uf(sf,xf,Af)}var Cf,Pf={exports:{}},If={exports:{}};(Cf=If).exports=function(t){if(Array.isArray(t))return t},Cf.exports.default=Cf.exports,Cf.exports.__esModule=!0;var jf={exports:{}};!function(t){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}},t.exports.default=t.exports,t.exports.__esModule=!0}(jf);var Mf={exports:{}},Lf={exports:{}};!function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.default=t.exports,t.exports.__esModule=!0}(Lf),function(t){var e=Lf.exports;t.exports=function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0}(Mf);var Nf={exports:{}};!function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0}(Nf),function(t){var e=If.exports,n=jf.exports,r=Mf.exports,o=Nf.exports;t.exports=function(t,i){return e(t)||n(t,i)||r(t,i)||o()},t.exports.default=t.exports,t.exports.__esModule=!0}(Pf);var Df=s,Bf=In,Ff=S,Uf=c.f,Wf=function(t){return function(e){for(var n,r=Ff(e),o=Bf(r),i=o.length,a=0,s=[];i>a;)n=o[a++],Df&&!Uf.call(r,n)||s.push(t?[n,r[n]]:r[n]);return s}},zf={entries:Wf(!0),values:Wf(!1)}.entries;Rn({target:"Object",stat:!0},{entries:function(t){return zf(t)}});var Gf={exports:{}},$f={exports:{}};!function(t){var e=Lf.exports;t.exports=function(t){if(Array.isArray(t))return e(t)},t.exports.default=t.exports,t.exports.__esModule=!0}($f);var Vf={exports:{}};!function(t){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0}(Vf);var Kf={exports:{}};!function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0}(Kf),function(t){var e=$f.exports,n=Vf.exports,r=Mf.exports,o=Kf.exports;t.exports=function(t){return e(t)||n(t)||r(t)||o()},t.exports.default=t.exports,t.exports.__esModule=!0}(Gf);var Yf={exports:{}};!function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0}(Yf);var qf={exports:{}},Xf={exports:{}};!function(t){function e(n,r){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,e(n,r)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0}(Xf),function(t){var e=Xf.exports;t.exports=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&e(t,n)},t.exports.default=t.exports,t.exports.__esModule=!0}(qf);var Jf={exports:{}},Hf={exports:{}};!function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0}(Hf),function(t){var e=Fu.exports.default,n=Hf.exports;t.exports=function(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?n(t):r},t.exports.default=t.exports,t.exports.__esModule=!0}(Jf);var Zf={exports:{}};!function(t){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.default=t.exports,t.exports.__esModule=!0,e(n)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0}(Zf);var Qf=Ke.includes,tl=du;Rn({target:"Array",proto:!0},{includes:function(t){return Qf(this,t,arguments.length>1?arguments[1]:void 0)}}),tl("includes");var el,nl,rl,ol,il=o.Promise,al=Yt.exports,sl=function(t,e,n){for(var r in e)al(t,r,e[r],n);return t},cl=A,ul=Nt,fl=s,ll=pt("species"),hl=function(t){var e=cl(t),n=ul.f;fl&&e&&!e[ll]&&n(e,ll,{configurable:!0,get:function(){return this}})},pl=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},dl=Bt,vl=oa,yl=De,gl=vi,ml=la,bl=ca,wl=Hi,xl=function(t,e){this.stopped=t,this.result=e},kl=function(t,e,n){var r,o,i,a,s,c,u,f=n&&n.that,l=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),d=gl(e,f,1+l+p),v=function(t){return r&&wl(r,"normal",t),new xl(!0,t)},y=function(t){return l?(dl(t),p?d(t[0],t[1],v):d(t[0],t[1])):p?d(t,v):d(t)};if(h)r=t;else{if("function"!=typeof(o=bl(t)))throw TypeError("Target is not iterable");if(vl(o)){for(i=0,a=yl(t.length);a>i;i++)if((s=y(t[i]))&&s instanceof xl)return s;return new xl(!1)}r=ml(t,o)}for(c=r.next;!(u=c.call(r)).done;){try{s=y(u.value)}catch(t){wl(r,"throw",t)}if("object"==typeof s&&s&&s instanceof xl)return s}return new xl(!1)},Sl=Bt,Tl=_n,El=pt("species"),Ol=function(t,e){var n,r=Sl(t).constructor;return void 0===r||null==(n=Sl(r)[El])?e:Tl(n)},Al=/(?:ipad|iphone|ipod).*applewebkit/i.test(R),Rl="process"==y(o.process),_l=o,Cl=a,Pl=vi,Il=Dn,jl=Et,Ml=Al,Ll=Rl,Nl=_l.setImmediate,Dl=_l.clearImmediate,Bl=_l.process,Fl=_l.MessageChannel,Ul=_l.Dispatch,Wl=0,zl={},Gl="onreadystatechange";try{el=_l.location}catch(t){}var $l=function(t){if(zl.hasOwnProperty(t)){var e=zl[t];delete zl[t],e()}},Vl=function(t){return function(){$l(t)}},Kl=function(t){$l(t.data)},Yl=function(t){_l.postMessage(String(t),el.protocol+"//"+el.host)};Nl&&Dl||(Nl=function(t){for(var e=[],n=arguments.length,r=1;n>r;)e.push(arguments[r++]);return zl[++Wl]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},nl(Wl),Wl},Dl=function(t){delete zl[t]},Ll?nl=function(t){Bl.nextTick(Vl(t))}:Ul&&Ul.now?nl=function(t){Ul.now(Vl(t))}:Fl&&!Ml?(ol=(rl=new Fl).port2,rl.port1.onmessage=Kl,nl=Pl(ol.postMessage,ol,1)):_l.addEventListener&&"function"==typeof postMessage&&!_l.importScripts&&el&&"file:"!==el.protocol&&!Cl(Yl)?(nl=Yl,_l.addEventListener("message",Kl,!1)):nl=Gl in jl("script")?function(t){Il.appendChild(jl("script")).onreadystatechange=function(){Il.removeChild(this),$l(t)}}:function(t){setTimeout(Vl(t),0)});var ql,Xl,Jl,Hl,Zl,Ql,th,eh,nh={set:Nl,clear:Dl},rh=o,oh=/ipad|iphone|ipod/i.test(R)&&void 0!==rh.Pebble,ih=/web0s(?!.*chrome)/i.test(R),ah=o,sh=i.f,ch=nh.set,uh=Al,fh=oh,lh=ih,hh=Rl,ph=ah.MutationObserver||ah.WebKitMutationObserver,dh=ah.document,vh=ah.process,yh=ah.Promise,gh=sh(ah,"queueMicrotask"),mh=gh&&gh.value;mh||(ql=function(){var t,e;for(hh&&(t=vh.domain)&&t.exit();Xl;){e=Xl.fn,Xl=Xl.next;try{e()}catch(t){throw Xl?Hl():Jl=void 0,t}}Jl=void 0,t&&t.enter()},uh||hh||lh||!ph||!dh?!fh&&yh&&yh.resolve?((th=yh.resolve(void 0)).constructor=yh,eh=th.then,Hl=function(){eh.call(th,ql)}):Hl=hh?function(){vh.nextTick(ql)}:function(){ch.call(ah,ql)}:(Zl=!0,Ql=dh.createTextNode(""),new ph(ql).observe(Ql,{characterData:!0}),Hl=function(){Ql.data=Zl=!Zl}));var bh=mh||function(t){var e={fn:t,next:void 0};Jl&&(Jl.next=e),Xl||(Xl=e,Hl()),Jl=e},wh={},xh=_n,kh=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=xh(e),this.reject=xh(n)};wh.f=function(t){return new kh(t)};var Sh,Th,Eh,Oh,Ah=Bt,Rh=T,_h=wh,Ch=o,Ph="object"==typeof window,Ih=Rn,jh=o,Mh=A,Lh=il,Nh=Yt.exports,Dh=sl,Bh=as,Fh=Ja,Uh=hl,Wh=T,zh=_n,Gh=pl,$h=Qt,Vh=kl,Kh=Ta,Yh=Ol,qh=nh.set,Xh=bh,Jh=function(t,e){if(Ah(t),Rh(e)&&e.constructor===t)return e;var n=_h.f(t);return(0,n.resolve)(e),n.promise},Hh=function(t,e){var n=Ch.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))},Zh=wh,Qh=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},tp=ke,ep=wn,np=Ph,rp=Rl,op=L,ip=pt("species"),ap="Promise",sp=tp.get,cp=tp.set,up=tp.getterFor(ap),fp=Lh&&Lh.prototype,lp=Lh,hp=fp,pp=jh.TypeError,dp=jh.document,vp=jh.process,yp=Zh.f,gp=yp,mp=!!(dp&&dp.createEvent&&jh.dispatchEvent),bp="function"==typeof PromiseRejectionEvent,wp="unhandledrejection",xp=!1,kp=ep(ap,(function(){var t=$h(lp),e=t!==String(lp);if(!e&&66===op)return!0;if(op>=51&&/native code/.test(t))return!1;var n=new lp((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};return(n.constructor={})[ip]=r,!(xp=n.then((function(){}))instanceof r)||!e&&np&&!bp})),Sp=kp||!Kh((function(t){lp.all(t).catch((function(){}))})),Tp=function(t){var e;return!(!Wh(t)||"function"!=typeof(e=t.then))&&e},Ep=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;Xh((function(){for(var r=t.value,o=1==t.state,i=0;n.length>i;){var a,s,c,u=n[i++],f=o?u.ok:u.fail,l=u.resolve,h=u.reject,p=u.domain;try{f?(o||(2===t.rejection&&_p(t),t.rejection=1),!0===f?a=r:(p&&p.enter(),a=f(r),p&&(p.exit(),c=!0)),a===u.promise?h(pp("Promise-chain cycle")):(s=Tp(a))?s.call(a,l,h):l(a)):h(r)}catch(t){p&&!c&&p.exit(),h(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&Ap(t)}))}},Op=function(t,e,n){var r,o;mp?((r=dp.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),jh.dispatchEvent(r)):r={promise:e,reason:n},!bp&&(o=jh["on"+t])?o(r):t===wp&&Hh("Unhandled promise rejection",n)},Ap=function(t){qh.call(jh,(function(){var e,n=t.facade,r=t.value;if(Rp(t)&&(e=Qh((function(){rp?vp.emit("unhandledRejection",r,n):Op(wp,n,r)})),t.rejection=rp||Rp(t)?2:1,e.error))throw e.value}))},Rp=function(t){return 1!==t.rejection&&!t.parent},_p=function(t){qh.call(jh,(function(){var e=t.facade;rp?vp.emit("rejectionHandled",e):Op("rejectionhandled",e,t.value)}))},Cp=function(t,e,n){return function(r){t(e,r,n)}},Pp=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,Ep(t,!0))},Ip=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw pp("Promise can't be resolved itself");var r=Tp(e);r?Xh((function(){var n={done:!1};try{r.call(e,Cp(Ip,n,t),Cp(Pp,n,t))}catch(e){Pp(n,e,t)}})):(t.value=e,t.state=1,Ep(t,!1))}catch(e){Pp({done:!1},e,t)}}};if(kp&&(hp=(lp=function(t){Gh(this,lp,ap),zh(t),Sh.call(this);var e=sp(this);try{t(Cp(Ip,e),Cp(Pp,e))}catch(t){Pp(e,t)}}).prototype,(Sh=function(t){cp(this,{type:ap,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Dh(hp,{then:function(t,e){var n=up(this),r=yp(Yh(this,lp));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=rp?vp.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Ep(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Th=function(){var t=new Sh,e=sp(t);this.promise=t,this.resolve=Cp(Ip,e),this.reject=Cp(Pp,e)},Zh.f=yp=function(t){return t===lp||t===Eh?new Th(t):gp(t)},"function"==typeof Lh&&fp!==Object.prototype)){Oh=fp.then,xp||(Nh(fp,"then",(function(t,e){var n=this;return new lp((function(t,e){Oh.call(n,t,e)})).then(t,e)}),{unsafe:!0}),Nh(fp,"catch",hp.catch,{unsafe:!0}));try{delete fp.constructor}catch(t){}Bh&&Bh(fp,hp)}Ih({global:!0,wrap:!0,forced:kp},{Promise:lp}),Fh(lp,ap,!1),Uh(ap),Eh=Mh(ap),Ih({target:ap,stat:!0,forced:kp},{reject:function(t){var e=yp(this);return e.reject.call(void 0,t),e.promise}}),Ih({target:ap,stat:!0,forced:kp},{resolve:function(t){return Jh(this,t)}}),Ih({target:ap,stat:!0,forced:Sp},{all:function(t){var e=this,n=yp(e),r=n.resolve,o=n.reject,i=Qh((function(){var n=zh(e.resolve),i=[],a=0,s=1;Vh(t,(function(t){var c=a++,u=!1;i.push(void 0),s++,n.call(e,t).then((function(t){u||(u=!0,i[c]=t,--s||r(i))}),o)})),--s||r(i)}));return i.error&&o(i.value),n.promise},race:function(t){var e=this,n=yp(e),r=n.reject,o=Qh((function(){var o=zh(e.resolve);Vh(t,(function(t){o.call(e,t).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}}),Object.defineProperty(Di,"__esModule",{value:!0});var jp=Pf.exports,Mp=Gf.exports,Lp=Yf.exports,Np=qf.exports,Dp=Jf.exports,Bp=Zf.exports;function Fp(t){return t&&"object"===kr(t)&&"default"in t?t:{default:t}}var Up=Fp(Fu.exports),Wp=Fp(jp),zp=Fp(Mp),Gp=Fp(Lp),$p=Fp(Np),Vp=Fp(Dp),Kp=Fp(Bp),Yp=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return{checks:e}};function qp(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Xp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xp(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Xp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Jp=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Yp((function(t){var n,r=!1,o=[],i=qp(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;"string"!=typeof a?(r=r||t instanceof a,o.push("an instance of ".concat(a.name))):(r=r||Up.default(t)===a,o.push("of type ".concat(a)))}}catch(t){i.e(t)}finally{i.f()}return[r,o]}))};function Hp(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Zp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zp(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Zp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Qp=Yp((function(t){return["string"==typeof t&&t.length>0,"a non-empty string"]})),td=Yp((function(t){return["number"==typeof t&&Number.isInteger(t)&&t>=0,"a non-negative integer"]})),ed=Yp((function(t){return["object"===Up.default(t)&&null!==t&&!Array.isArray(t),"a pure object (non-null and non-array)"]}));function nd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Kp.default(t);if(e){var o=Kp.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Vp.default(this,n)}}function rd(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return od(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return od(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function od(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var id=function(t,e){if(e.length>t.length)throw new Error("Expected at most ".concat(t.length," argument(s), but got ").concat(e.length));for(;e.length<t.length;)e.push(void 0);var n,r=rd(e.entries());try{for(r.s();!(n=r.n()).done;){var o=Wp.default(n.value,2),i=o[0],a=o[1],s=ud(t[i],a),c=Wp.default(s,4),u=c[0],f=c[1],l=c[2],h=c[3];if(!u)throw new Error("Argument ".concat(i+1," is expected to be ").concat(l).concat(h," but got ").concat(f))}}catch(t){r.e(t)}finally{r.f()}},ad=function(t){var e,n,r;(["undefined","boolean","number","bigint","string"].includes(Up.default(t))&&(n="string"==typeof t?'"'.concat(t,'"'):"".concat(t)),"object"===Up.default(t)&&"Object"!==(null==t||null===(e=t.constructor)||void 0===e?void 0:e.name))&&(n=null===t?"null":"instance of ".concat(null==t||null===(r=t.constructor)||void 0===r?void 0:r.name));return n||(n=Up.default(t)),n},sd=function(t){var e,n=[],r=rd(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;n.push(cd(o))}}catch(t){r.e(t)}finally{r.f()}return n},cd=function(t){var e,n=[],r=rd(Array.isArray(t)?t:[t]);try{for(r.s();!(e=r.n()).done;){var o=e.value;"string"!=typeof o&&"function"!=typeof o?n.push(o):n.push(Jp(o))}}catch(t){r.e(t)}finally{r.f()}return n},ud=function(t,e){var n,r,o=[],i=!1,a=rd(t);try{for(a.s();!(r=a.n()).done;){var s,c=rd(r.value.checks);try{for(c.s();!(s=c.n()).done;){var u=(0,s.value)(e),f=Wp.default(u,3),l=f[0],h=f[1],p=f[2];i=i||l,!n&&p&&(n=p),h&&(o=[].concat(zp.default(o),"string"==typeof h?[h]:zp.default(h)))}}catch(t){c.e(t)}finally{c.f()}}}catch(t){a.e(t)}finally{a.f()}if(i)return[!0];var d=n||ad(e),v=o.length-1;return[!1,d,v>0?"".concat(o.slice(0,v).join(", ")," or ").concat(o[v]):o.join(", "),v>1?";":","]};function fd(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ld(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ld(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function ld(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Di.array=function(t,e){return Yp((function(n){if(!Array.isArray(n))return[!1,"an array of ".concat(t)];var r,o=fd(n.entries());try{for(o.s();!(r=o.n()).done;){var i=Wp.default(r.value,2),a=i[0],s=i[1],c=ud(cd(e),s),u=Wp.default(c,3),f=u[0],l=u[1],h=u[2];if(!f)return[!1,"a valid array of ".concat(t," (index ").concat(a," should be ").concat(h,")"),"malformed array of ".concat(t," (index ").concat(a," is ").concat(l,")")]}}catch(t){o.e(t)}finally{o.f()}return[!0]}))},Di.custom=Yp;var hd=Di.literal=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Yp((function(t){var n,r=!1,o=[],i=Hp(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||t===a,o.push("string"==typeof a?'"'.concat(a,'"'):"".concat(a))}}catch(t){i.e(t)}finally{i.f()}return[r,o]}))},pd=Di.nonEmptyString=Qp;Di.nonNegativeInteger=td,Di.objectSchema=function(t,e){return Yp((function(n){if("object"!==Up.default(n)||null===n||Array.isArray(n))return[!1,"valid ".concat(t," (should be a pure object)")];for(var r=0,o=Object.entries(e);r<o.length;r++){var i=Wp.default(o[r],2),a=i[0],s=i[1],c=ud(cd(s),n[a]),u=Wp.default(c,3),f=u[0],l=u[1],h=u[2];if(!f)return[!1,"valid ".concat(t,' (key "').concat(a,'" should be ').concat(h,")"),"malformed ".concat(t,' (key "').concat(a,'" is ').concat(l,")")]}return[!0]}))};var dd=Di.pureObject=ed;Di.runtimeTypeValidation=id,Di.stringifyReceivedType=ad,Di.type=Jp;var vd=Di.validateConstructorTypes=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=sd(e);return function(t){return function(t){$p.default(n,t);var e=nd(n);function n(){Gp.default(this,n);for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return id(r,o),e.call.apply(e,[this].concat(o))}return n}(t)}};Di.validateTypes=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=sd(e);return function(t,e,n){if("function"!=typeof n.value)throw new Error("The validateTypes decorator can only be applied to methods");var o=n.value;n.value=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return id(r,e),o.apply(this,e)}}},Di.validateTypesAsync=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=sd(e);return function(t,e,n){if("function"!=typeof n.value)throw new Error("The validateTypesAsync decorator can only be applied to methods");var o=n.value;n.value=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];try{id(r,e)}catch(t){return Promise.reject(t)}return o.apply(this,e)}}};var yd={exports:{}};!function(t){var e,r;e=n,r=function(){var t=function(){},e="undefined",n=("undefined"==typeof window?"undefined":kr(window))!==e&&kr(window.navigator)!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"];function o(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(r){return"debug"===r&&(r="log"),("undefined"==typeof console?"undefined":kr(console))!==e&&("trace"===r&&n?i:void 0!==console[r]?o(console,r):void 0!==console.log?o(console,"log"):t)}function s(e,n){for(var o=0;o<r.length;o++){var i=r[o];this[i]=o<e?t:this.methodFactory(i,e,n)}this.log=this.debug}function c(t,n,r){return function(){("undefined"==typeof console?"undefined":kr(console))!==e&&(s.call(this,n,r),this[t].apply(this,arguments))}}function u(t,e,n){return a(t)||c.apply(this,arguments)}function f(t,n,o){var i,a=this,c="loglevel";function f(){var t;if(("undefined"==typeof window?"undefined":kr(window))!==e&&c){try{t=window.localStorage[c]}catch(t){}if(kr(t)===e)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(c)+"=");-1!==r&&(t=/^([^;]+)/.exec(n.slice(r))[1])}catch(t){}return void 0===a.levels[t]&&(t=void 0),t}}"string"==typeof t?c+=":"+t:"symbol"===kr(t)&&(c=void 0),a.name=t,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=o||u,a.getLevel=function(){return i},a.setLevel=function(n,o){if("string"==typeof n&&void 0!==a.levels[n.toUpperCase()]&&(n=a.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(i=n,!1!==o&&function(t){var n=(r[t]||"silent").toUpperCase();if(("undefined"==typeof window?"undefined":kr(window))!==e&&c){try{return void(window.localStorage[c]=n)}catch(t){}try{window.document.cookie=encodeURIComponent(c)+"="+n+";"}catch(t){}}}(n),s.call(a,n,t),("undefined"==typeof console?"undefined":kr(console))===e&&n<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(t){f()||a.setLevel(t,!1)},a.enableAll=function(t){a.setLevel(a.levels.TRACE,t)},a.disableAll=function(t){a.setLevel(a.levels.SILENT,t)};var l=f();null==l&&(l=null==n?"WARN":n),a.setLevel(l,!1)}var l=new f,h={};l.getLogger=function(t){if("symbol"!==kr(t)&&"string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=h[t];return e||(e=h[t]=new f(t,l.getLevel(),l.methodFactory)),e};var p=("undefined"==typeof window?"undefined":kr(window))!==e?window.log:void 0;return l.noConflict=function(){return("undefined"==typeof window?"undefined":kr(window))!==e&&window.log===l&&(window.log=p),l},l.getLoggers=function(){return h},l.default=l,l},t.exports?t.exports=r():e.log=r()}(yd);var gd=yd.exports.getLogger("twilsock");function md(t,e){return["".concat((new Date).toISOString()," Twilsock ").concat(t,":")].concat(Array.from(e))}var bd=new(function(){function t(e){Tr(this,t),Er(this,"prefix",""),this.prefix=null!=e&&e.length>0?" "+e+":":""}return yr(t,[{key:"setLevel",value:function(t){gd.setLevel(t)}},{key:"trace",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];gd.trace.apply(null,md("T",e))}},{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];gd.debug.apply(null,md("D",e))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];gd.info.apply(null,md("I",e))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];gd.warn.apply(null,md("W",e))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];gd.error.apply(null,md("E",e))}}],[{key:"setLevel",value:function(t){gd.setLevel(t)}},{key:"trace",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];gd.trace.apply(null,md("T",e))}},{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];gd.debug.apply(null,md("D",e))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];gd.info.apply(null,md("I",e))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];gd.warn.apply(null,md("W",e))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];gd.error.apply(null,md("E",e))}}]),t}())(""),wd={exports:{}},xd=!a((function(){return Object.isExtensible(Object.preventExtensions({}))})),kd=Rn,Sd=se,Td=T,Ed=tt,Od=Nt.f,Ad=Pe,Rd=Cs,_d=xd,Cd=!1,Pd=rt("meta"),Id=0,jd=Object.isExtensible||function(){return!0},Md=function(t){Od(t,Pd,{value:{objectID:"O"+Id++,weakData:{}}})},Ld=wd.exports={enable:function(){Ld.enable=function(){},Cd=!0;var t=Ad.f,e=[].splice,n={};n[Pd]=1,t(n).length&&(Ad.f=function(n){for(var r=t(n),o=0,i=r.length;o<i;o++)if(r[o]===Pd){e.call(r,o,1);break}return r},kd({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Rd.f}))},fastKey:function(t,e){if(!Td(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!Ed(t,Pd)){if(!jd(t))return"F";if(!e)return"E";Md(t)}return t[Pd].objectID},getWeakData:function(t,e){if(!Ed(t,Pd)){if(!jd(t))return!0;if(!e)return!1;Md(t)}return t[Pd].weakData},onFreeze:function(t){return _d&&Cd&&jd(t)&&!Ed(t,Pd)&&Md(t),t}};Sd[Pd]=!0;var Nd=Rn,Dd=o,Bd=wn,Fd=Yt.exports,Ud=wd.exports,Wd=kl,zd=pl,Gd=T,$d=a,Vd=Ta,Kd=Ja,Yd=Hu,qd=function(t,e,n){var r=-1!==t.indexOf("Map"),o=-1!==t.indexOf("Weak"),i=r?"set":"add",a=Dd[t],s=a&&a.prototype,c=a,u={},f=function(t){var e=s[t];Fd(s,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(o&&!Gd(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!Gd(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!Gd(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(Bd(t,"function"!=typeof a||!(o||s.forEach&&!$d((function(){(new a).entries().next()})))))c=n.getConstructor(e,t,r,i),Ud.enable();else if(Bd(t,!0)){var l=new c,h=l[i](o?{}:-0,1)!=l,p=$d((function(){l.has(1)})),d=Vd((function(t){new a(t)})),v=!o&&$d((function(){for(var t=new a,e=5;e--;)t[i](e,e);return!t.has(-0)}));d||((c=e((function(e,n){zd(e,c,t);var o=Yd(new a,e,c);return null!=n&&Wd(n,o[i],{that:o,AS_ENTRIES:r}),o}))).prototype=s,s.constructor=c),(p||v)&&(f("delete"),f("has"),r&&f("get")),(v||h)&&f(i),o&&s.clear&&delete s.clear}return u[t]=c,Nd({global:!0,forced:c!=a},u),Kd(c,t),o||n.setStrong(c,t,r),c},Xd=Nt.f,Jd=Xn,Hd=sl,Zd=vi,Qd=pl,tv=kl,ev=ks,nv=hl,rv=s,ov=wd.exports.fastKey,iv=ke.set,av=ke.getterFor,sv={getConstructor:function(t,e,n,r){var o=t((function(t,i){Qd(t,o,e),iv(t,{type:e,index:Jd(null),first:void 0,last:void 0,size:0}),rv||(t.size=0),null!=i&&tv(i,t[r],{that:t,AS_ENTRIES:n})})),i=av(e),a=function(t,e,n){var r,o,a=i(t),c=s(t,e);return c?c.value=n:(a.last=c={index:o=ov(e,!0),key:e,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=c),r&&(r.next=c),rv?a.size++:t.size++,"F"!==o&&(a.index[o]=c)),t},s=function(t,e){var n,r=i(t),o=ov(e);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==e)return n};return Hd(o.prototype,{clear:function(){for(var t=i(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,rv?t.size=0:this.size=0},delete:function(t){var e=this,n=i(e),r=s(e,t);if(r){var o=r.next,a=r.previous;delete n.index[r.index],r.removed=!0,a&&(a.next=o),o&&(o.previous=a),n.first==r&&(n.first=o),n.last==r&&(n.last=a),rv?n.size--:e.size--}return!!r},forEach:function(t){for(var e,n=i(this),r=Zd(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),Hd(o.prototype,n?{get:function(t){var e=s(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),rv&&Xd(o.prototype,"size",{get:function(){return i(this).size}}),o},setStrong:function(t,e,n){var r=e+" Iterator",o=av(e),i=av(r);ev(t,e,(function(t,e){iv(this,{type:r,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),nv(e)}};qd("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),sv);var cv="0.12.2",uv=function(){function t(e,n,r){Tr(this,t),Er(this,"confirmedCapabilities",new Set),this.activeGrant=n,this._token=e;var o=r.region||"us1",i="wss://tsock.".concat(o,".twilio.com/v3/wsconnect"),a=r.twilsock||r.Twilsock||{};this.url=a.uri||i,this._continuationToken=r.continuationToken?r.continuationToken:null,this.logLevel=r.logLevel?r.logLevel:"error",this.retryPolicy=r.retryPolicy?r.retryPolicy:{min:1e3,max:12e4,randomness:.2},this.clientMetadata=r.clientMetadata?r.clientMetadata:{},this.clientMetadata.ver=cv,this.initRegistrations=r.initRegistrations?r.initRegistrations:null,this.tweaks=r.tweaks?r.tweaks:null}return yr(t,[{key:"token",get:function(){return this._token}},{key:"continuationToken",get:function(){return this._continuationToken}},{key:"updateToken",value:function(t){this._token=t}},{key:"updateContinuationToken",value:function(t){this._continuationToken=t}}]),t}(),fv={exports:{}};!function(t,e){var n;n=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){t.exports=function(t,e){var n,r,o;for(n=1;n<arguments.length;n++)for(o in r=arguments[n])r.hasOwnProperty(o)&&(t[o]=r[o]);return t}},function(t,e,n){var r=n(0);t.exports={build:function(t,e){var n,o,i,a=e.plugins;for(n=0,o=a.length;n<o;n++)(i=a[n]).methods&&r(t,i.methods),i.properties&&Object.defineProperties(t,i.properties)},hook:function(t,e,n){var r,o,i,a,s=t.config.plugins,c=[t.context];for(n&&(c=c.concat(n)),r=0,o=s.length;r<o;r++)a=s[r],(i=s[r][e])&&i.apply(a,c)}}},function(t,e,n){function r(t){if(0===t.length)return t;var e,n,r=t.split(/[_-]/);if(1===r.length&&r[0][0].toLowerCase()===r[0][0])return t;for(n=r[0].toLowerCase(),e=1;e<r.length;e++)n=n+r[e].charAt(0).toUpperCase()+r[e].substring(1).toLowerCase();return n}r.prepended=function(t,e){return t+(e=r(e))[0].toUpperCase()+e.substring(1)},t.exports=r},function(t,e,n){var r=n(0),o=n(2);function i(t,e){t=t||{},this.options=t,this.defaults=e.defaults,this.states=[],this.transitions=[],this.map={},this.lifecycle=this.configureLifecycle(),this.init=this.configureInitTransition(t.init),this.data=this.configureData(t.data),this.methods=this.configureMethods(t.methods),this.map[this.defaults.wildcard]={},this.configureTransitions(t.transitions||[]),this.plugins=this.configurePlugins(t.plugins,e.plugin)}r(i.prototype,{addState:function(t){this.map[t]||(this.states.push(t),this.addStateLifecycleNames(t),this.map[t]={})},addStateLifecycleNames:function(t){this.lifecycle.onEnter[t]=o.prepended("onEnter",t),this.lifecycle.onLeave[t]=o.prepended("onLeave",t),this.lifecycle.on[t]=o.prepended("on",t)},addTransition:function(t){this.transitions.indexOf(t)<0&&(this.transitions.push(t),this.addTransitionLifecycleNames(t))},addTransitionLifecycleNames:function(t){this.lifecycle.onBefore[t]=o.prepended("onBefore",t),this.lifecycle.onAfter[t]=o.prepended("onAfter",t),this.lifecycle.on[t]=o.prepended("on",t)},mapTransition:function(t){var e=t.name,n=t.from,r=t.to;return this.addState(n),"function"!=typeof r&&this.addState(r),this.addTransition(e),this.map[n][e]=t,t},configureLifecycle:function(){return{onBefore:{transition:"onBeforeTransition"},onAfter:{transition:"onAfterTransition"},onEnter:{state:"onEnterState"},onLeave:{state:"onLeaveState"},on:{transition:"onTransition"}}},configureInitTransition:function(t){return"string"==typeof t?this.mapTransition(r({},this.defaults.init,{to:t,active:!0})):"object"===kr(t)?this.mapTransition(r({},this.defaults.init,t,{active:!0})):(this.addState(this.defaults.init.from),this.defaults.init)},configureData:function(t){return"function"==typeof t?t:"object"===kr(t)?function(){return t}:function(){return{}}},configureMethods:function(t){return t||{}},configurePlugins:function(t,e){var n,r,o;for(n=0,r=(t=t||[]).length;n<r;n++)"function"==typeof(o=t[n])&&(t[n]=o=o()),o.configure&&o.configure(this);return t},configureTransitions:function(t){var e,n,r,o,i,a=this.defaults.wildcard;for(n=0;n<t.length;n++)for(r=t[n],o=Array.isArray(r.from)?r.from:[r.from||a],i=r.to||a,e=0;e<o.length;e++)this.mapTransition({name:r.name,from:o[e],to:i})},transitionFor:function(t,e){var n=this.defaults.wildcard;return this.map[t][e]||this.map[n][e]},transitionsFor:function(t){var e=this.defaults.wildcard;return Object.keys(this.map[t]).concat(Object.keys(this.map[e]))},allStates:function(){return this.states},allTransitions:function(){return this.transitions}}),t.exports=i},function(t,e,n){var r=n(0),o=n(6),i=n(1),a=[null,[]];function s(t,e){this.context=t,this.config=e,this.state=e.init.from,this.observers=[t]}r(s.prototype,{init:function(t){if(r(this.context,this.config.data.apply(this.context,t)),i.hook(this,"init"),this.config.init.active)return this.fire(this.config.init.name,[])},is:function(t){return Array.isArray(t)?t.indexOf(this.state)>=0:this.state===t},isPending:function(){return this.pending},can:function(t){return!this.isPending()&&!!this.seek(t)},cannot:function(t){return!this.can(t)},allStates:function(){return this.config.allStates()},allTransitions:function(){return this.config.allTransitions()},transitions:function(){return this.config.transitionsFor(this.state)},seek:function(t,e){var n=this.config.defaults.wildcard,r=this.config.transitionFor(this.state,t),o=r&&r.to;return"function"==typeof o?o.apply(this.context,e):o===n?this.state:o},fire:function(t,e){return this.transit(t,this.state,this.seek(t,e),e)},transit:function(t,e,n,r){var o=this.config.lifecycle,i=this.config.options.observeUnchangedState||e!==n;return n?this.isPending()?this.context.onPendingTransition(t,e,n):(this.config.addState(n),this.beginTransit(),r.unshift({transition:t,from:e,to:n,fsm:this.context}),this.observeEvents([this.observersForEvent(o.onBefore.transition),this.observersForEvent(o.onBefore[t]),i?this.observersForEvent(o.onLeave.state):a,i?this.observersForEvent(o.onLeave[e]):a,this.observersForEvent(o.on.transition),i?["doTransit",[this]]:a,i?this.observersForEvent(o.onEnter.state):a,i?this.observersForEvent(o.onEnter[n]):a,i?this.observersForEvent(o.on[n]):a,this.observersForEvent(o.onAfter.transition),this.observersForEvent(o.onAfter[t]),this.observersForEvent(o.on[t])],r)):this.context.onInvalidTransition(t,e,n)},beginTransit:function(){this.pending=!0},endTransit:function(t){return this.pending=!1,t},failTransit:function(t){throw this.pending=!1,t},doTransit:function(t){this.state=t.to},observe:function(t){if(2===t.length){var e={};e[t[0]]=t[1],this.observers.push(e)}else this.observers.push(t[0])},observersForEvent:function(t){for(var e,n=0,r=this.observers.length,o=[];n<r;n++)(e=this.observers[n])[t]&&o.push(e);return[t,o,!0]},observeEvents:function(t,e,n,r){if(0===t.length)return this.endTransit(void 0===r||r);var o=t[0][0],a=t[0][1],s=t[0][2];if(e[0].event=o,o&&s&&o!==n&&i.hook(this,"lifecycle",e),0===a.length)return t.shift(),this.observeEvents(t,e,o,r);var c=a.shift(),u=c[o].apply(c,e);return u&&"function"==typeof u.then?u.then(this.observeEvents.bind(this,t,e,o)).catch(this.failTransit.bind(this)):!1===u?this.endTransit(!1):this.observeEvents(t,e,o,u)},onInvalidTransition:function(t,e,n){throw new o("transition is invalid in current state",t,e,n,this.state)},onPendingTransition:function(t,e,n){throw new o("transition is invalid while previous transition is still in progress",t,e,n,this.state)}}),t.exports=s},function(t,e,n){var r=n(0),o=n(2),i=n(1),a=n(3),s=n(4),c={is:function(t){return this._fsm.is(t)},can:function(t){return this._fsm.can(t)},cannot:function(t){return this._fsm.cannot(t)},observe:function(){return this._fsm.observe(arguments)},transitions:function(){return this._fsm.transitions()},allTransitions:function(){return this._fsm.allTransitions()},allStates:function(){return this._fsm.allStates()},onInvalidTransition:function(t,e,n){return this._fsm.onInvalidTransition(t,e,n)},onPendingTransition:function(t,e,n){return this._fsm.onPendingTransition(t,e,n)}},u={state:{configurable:!1,enumerable:!0,get:function(){return this._fsm.state},set:function(t){throw Error("use transitions to change state")}}};function f(t){return l(this||{},t)}function l(t,e){return h(t,new a(e,f)),t._fsm(),t}function h(t,e){if("object"!==kr(t)||Array.isArray(t))throw Error("StateMachine can only be applied to objects");i.build(t,e),Object.defineProperties(t,u),r(t,c),r(t,e.methods),e.allTransitions().forEach((function(e){t[o(e)]=function(){return this._fsm.fire(e,[].slice.call(arguments))}})),t._fsm=function(){this._fsm=new s(this,e),this._fsm.init(arguments)}}f.version="3.0.1",f.factory=function(){var t,e;"function"==typeof arguments[0]?(t=arguments[0],e=arguments[1]||{}):(t=function(){this._fsm.apply(this,arguments)},e=arguments[0]||{});var n=new a(e,f);return h(t.prototype,n),t.prototype._fsm.config=n,t},f.apply=l,f.defaults={wildcard:"*",init:{name:"init",from:"none"}},t.exports=f},function(t,e,n){t.exports=function(t,e,n,r,o){this.message=t,this.transition=e,this.from=n,this.to=r,this.current=o}}])},t.exports=n()}(fv);var lv={exports:{}},hv="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(hv){var pv=new Uint8Array(16);lv.exports=function(){return hv(pv),pv}}else{var dv=new Array(16);lv.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),dv[e]=t>>>((3&e)<<3)&255;return dv}}for(var vv=[],yv=0;yv<256;++yv)vv[yv]=(yv+256).toString(16).substr(1);var gv,mv,bv=function(t,e){var n=e||0,r=vv;return[r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],"-",r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]],r[t[n++]]].join("")},wv=lv.exports,xv=bv,kv=0,Sv=0;var Tv=function(t,e,n){var r=e&&n||0,o=e||[],i=(t=t||{}).node||gv,a=void 0!==t.clockseq?t.clockseq:mv;if(null==i||null==a){var s=wv();null==i&&(i=gv=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=mv=16383&(s[6]<<8|s[7]))}var c=void 0!==t.msecs?t.msecs:(new Date).getTime(),u=void 0!==t.nsecs?t.nsecs:Sv+1,f=c-kv+(u-Sv)/1e4;if(f<0&&void 0===t.clockseq&&(a=a+1&16383),(f<0||c>kv)&&void 0===t.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");kv=c,Sv=u,mv=a;var l=(1e4*(268435455&(c+=122192928e5))+u)%4294967296;o[r++]=l>>>24&255,o[r++]=l>>>16&255,o[r++]=l>>>8&255,o[r++]=255&l;var h=c/4294967296*1e4&268435455;o[r++]=h>>>8&255,o[r++]=255&h,o[r++]=h>>>24&15|16,o[r++]=h>>>16&255,o[r++]=a>>>8|128,o[r++]=255&a;for(var p=0;p<6;++p)o[r+p]=i[p];return e||xv(o)},Ev=lv.exports,Ov=bv;var Av=Tv,Rv=function(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||Ev)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var i=0;i<16;++i)e[r+i]=o[i];return e||Ov(o)},_v=Rv;_v.v1=Av,_v.v4=Rv;var Cv=_v,Pv=function t(e){Tr(this,t),this.id=e||"TM".concat(Cv.v4())};function Iv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mr(t);if(e){var o=mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Sr(this,n)}}var jv=function(t){xr(n,t);var e=Iv(n);function n(t,r,o,i,a){var s;return Tr(this,n),Er(gr(s=e.call(this)),"method","init"),s.token=t,s.continuation_token=r,s.metadata=o,s.registrations=i,s.tweaks=a,s.capabilities=["client_update","offline_storage","telemetry.v1"],s}return n}(Pv);function Mv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mr(t);if(e){var o=mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Sr(this,n)}}var Lv=function(t){xr(n,t);var e=Mv(n);function n(t,r,o,i,a,s,c){var u;return Tr(this,n),(u=e.call(this,t)).continuationToken=r,u.continuationTokenStatus=i,u.offlineStorage=a,u.initRegistrations=s,u.debugInfo=c,u.confirmedCapabilities=o,u}return n}(Pv);function Nv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mr(t);if(e){var o=mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Sr(this,n)}}var Dv=function(t){xr(n,t);var e=Nv(n);function n(t){var r;return Tr(this,n),Er(gr(r=e.call(this)),"method","update"),r.token=t,r}return n}(Pv);function Bv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mr(t);if(e){var o=mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Sr(this,n)}}var Fv=function(t){xr(n,t);var e=Bv(n);function n(t,r,o){var i;return Tr(this,n),Er(gr(i=e.call(this)),"method","message"),i.active_grant=t,i.payload_type=r,i.http_request=o,i}return n}(Pv);function Uv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mr(t);if(e){var o=mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Sr(this,n)}}var Wv=function(t){xr(n,t);var e=Uv(n);function n(t){var r;return Tr(this,n),Er(gr(r=e.call(this,t)),"method","reply"),Er(gr(r),"payload_type","application/json"),Er(gr(r),"status",{code:200,status:"OK"}),r}return n}(Pv);function zv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mr(t);if(e){var o=mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Sr(this,n)}}var Gv=function(t){xr(n,t);var e=zv(n);function n(){var t;return Tr(this,n),Er(gr(t=e.call(this)),"method","close"),t}return n}(Pv);function $v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mr(t);if(e){var o=mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Sr(this,n)}}var Vv=function t(e,n,r,o,i,a){Tr(this,t),this.start=e,this.end=n,this.title=r,this.details=o,this.id=i,this.type=a},Kv=function(t){xr(n,t);var e=$v(n);function n(t){var r;return Tr(this,n),Er(gr(r=e.call(this)),"method","telemetry.v1"),r.events=t,r}return n}(Pv),Yv={},qv=a,Xv=o.RegExp;Yv.UNSUPPORTED_Y=qv((function(){var t=Xv("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),Yv.BROKEN_CARET=qv((function(){var t=Xv("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));var Jv,Hv,Zv=a,Qv=o.RegExp,ty=Zv((function(){var t=Qv(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),ey=a,ny=o.RegExp,ry=ey((function(){var t=ny("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),oy=qo,iy=Jo,ay=Yv,sy=G.exports,cy=Xn,uy=ke.get,fy=ty,ly=ry,hy=RegExp.prototype.exec,py=sy("native-string-replace",String.prototype.replace),dy=hy,vy=(Jv=/a/,Hv=/b*/g,hy.call(Jv,"a"),hy.call(Hv,"a"),0!==Jv.lastIndex||0!==Hv.lastIndex),yy=ay.UNSUPPORTED_Y||ay.BROKEN_CARET,gy=void 0!==/()??/.exec("")[1];(vy||gy||yy||fy||ly)&&(dy=function(t){var e,n,r,o,i,a,s,c=this,u=uy(c),f=oy(t),l=u.raw;if(l)return l.lastIndex=c.lastIndex,e=dy.call(l,f),c.lastIndex=l.lastIndex,e;var h=u.groups,p=yy&&c.sticky,d=iy.call(c),v=c.source,y=0,g=f;if(p&&(-1===(d=d.replace("y","")).indexOf("g")&&(d+="g"),g=f.slice(c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==f.charAt(c.lastIndex-1))&&(v="(?: "+v+")",g=" "+g,y++),n=new RegExp("^(?:"+v+")",d)),gy&&(n=new RegExp("^"+v+"$(?!\\s)",d)),vy&&(r=c.lastIndex),o=hy.call(p?n:c,g),p?o?(o.input=o.input.slice(y),o[0]=o[0].slice(y),o.index=c.lastIndex,c.lastIndex+=o[0].length):c.lastIndex=0:vy&&o&&(c.lastIndex=c.global?o.index+o[0].length:r),gy&&o&&o.length>1&&py.call(o[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&h)for(o.groups=a=cy(null),i=0;i<h.length;i++)a[(s=h[i])[0]]=o[s[1]];return o});var my=dy;Rn({target:"RegExp",proto:!0,forced:/./.exec!==my},{exec:my});var by=Yt.exports,wy=my,xy=a,ky=pt,Sy=Kt,Ty=ky("species"),Ey=RegExp.prototype,Oy=function(t,e,n,r){var o=ky(t),i=!xy((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),a=i&&!xy((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[Ty]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return e=!0,null},n[o](""),!e}));if(!i||!a||n){var s=/./[o],c=e(o,""[t],(function(t,e,n,r,o){var a=e.exec;return a===wy||a===Ey.exec?i&&!o?{done:!0,value:s.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}));by(String.prototype,t,c[0]),by(Ey,o,c[1])}r&&Sy(Ey[o],"sham",!0)},Ay=ja.charAt,Ry=function(t,e,n){return e+(n?Ay(t,e).length:1)},_y=H,Cy=Math.floor,Py="".replace,Iy=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,jy=/\$([$&'`]|\d{1,2})/g,My=y,Ly=my,Ny=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==My(t))throw TypeError("RegExp#exec called on incompatible receiver");return Ly.call(t,e)},Dy=Oy,By=a,Fy=Bt,Uy=Me,Wy=De,zy=qo,Gy=w,$y=Ry,Vy=function(t,e,n,r,o,i){var a=n+t.length,s=r.length,c=jy;return void 0!==o&&(o=_y(o),c=Iy),Py.call(i,c,(function(i,c){var u;switch(c.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(a);case"<":u=o[c.slice(1,-1)];break;default:var f=+c;if(0===f)return i;if(f>s){var l=Cy(f/10);return 0===l?i:l<=s?void 0===r[l-1]?c.charAt(1):r[l-1]+c.charAt(1):i}u=r[f-1]}return void 0===u?"":u}))},Ky=Ny,Yy=pt("replace"),qy=Math.max,Xy=Math.min,Jy="$0"==="a".replace(/./,"$0"),Hy=!!/./[Yy]&&""===/./[Yy]("a","$0");Dy("replace",(function(t,e,n){var r=Hy?"$":"$0";return[function(t,n){var r=Gy(this),o=null==t?void 0:t[Yy];return void 0!==o?o.call(t,r,n):e.call(zy(r),t,n)},function(t,o){var i=Fy(this),a=zy(t);if("string"==typeof o&&-1===o.indexOf(r)&&-1===o.indexOf("$<")){var s=n(e,i,a,o);if(s.done)return s.value}var c="function"==typeof o;c||(o=zy(o));var u=i.global;if(u){var f=i.unicode;i.lastIndex=0}for(var l=[];;){var h=Ky(i,a);if(null===h)break;if(l.push(h),!u)break;""===zy(h[0])&&(i.lastIndex=$y(a,Wy(i.lastIndex),f))}for(var p,d="",v=0,y=0;y<l.length;y++){h=l[y];for(var g=zy(h[0]),m=qy(Xy(Uy(h.index),a.length),0),b=[],w=1;w<h.length;w++)b.push(void 0===(p=h[w])?p:String(p));var x=h.groups;if(c){var k=[g].concat(b,m,a);void 0!==x&&k.push(x);var S=zy(o.apply(void 0,k))}else S=Vy(g,a,m,b,x,o);m>=v&&(d+=a.slice(v,m)+S,v=m+g.length)}return d+a.slice(v)}]}),!!By((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!Jy||Hy);var Zy,Qy,tg,eg={exports:{}},ng="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,rg=ng,og=s,ig=o,ag=T,sg=tt,cg=Wo,ug=Kt,fg=Yt.exports,lg=Nt.f,hg=Ua,pg=as,dg=pt,vg=rt,yg=ig.Int8Array,gg=yg&&yg.prototype,mg=ig.Uint8ClampedArray,bg=mg&&mg.prototype,wg=yg&&hg(yg),xg=gg&&hg(gg),kg=Object.prototype,Sg=kg.isPrototypeOf,Tg=dg("toStringTag"),Eg=vg("TYPED_ARRAY_TAG"),Og=vg("TYPED_ARRAY_CONSTRUCTOR"),Ag=rg&&!!pg&&"Opera"!==cg(ig.opera),Rg=!1,_g={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Cg={BigInt64Array:8,BigUint64Array:8},Pg=function(t){if(!ag(t))return!1;var e=cg(t);return sg(_g,e)||sg(Cg,e)};for(Zy in _g)(tg=(Qy=ig[Zy])&&Qy.prototype)?ug(tg,Og,Qy):Ag=!1;for(Zy in Cg)(tg=(Qy=ig[Zy])&&Qy.prototype)&&ug(tg,Og,Qy);if((!Ag||"function"!=typeof wg||wg===Function.prototype)&&(wg=function(){throw TypeError("Incorrect invocation")},Ag))for(Zy in _g)ig[Zy]&&pg(ig[Zy],wg);if((!Ag||!xg||xg===kg)&&(xg=wg.prototype,Ag))for(Zy in _g)ig[Zy]&&pg(ig[Zy].prototype,xg);if(Ag&&hg(bg)!==xg&&pg(bg,xg),og&&!sg(xg,Tg))for(Zy in Rg=!0,lg(xg,Tg,{get:function(){return ag(this)?this[Eg]:void 0}}),_g)ig[Zy]&&ug(ig[Zy],Eg,Zy);var Ig={NATIVE_ARRAY_BUFFER_VIEWS:Ag,TYPED_ARRAY_CONSTRUCTOR:Og,TYPED_ARRAY_TAG:Rg&&Eg,aTypedArray:function(t){if(Pg(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(pg&&!Sg.call(wg,t))throw TypeError("Target is not a typed array constructor");return t},exportTypedArrayMethod:function(t,e,n){if(og){if(n)for(var r in _g){var o=ig[r];if(o&&sg(o.prototype,t))try{delete o.prototype[t]}catch(t){}}xg[t]&&!n||fg(xg,t,n?e:Ag&&gg[t]||e)}},exportTypedArrayStaticMethod:function(t,e,n){var r,o;if(og){if(pg){if(n)for(r in _g)if((o=ig[r])&&sg(o,t))try{delete o[t]}catch(t){}if(wg[t]&&!n)return;try{return fg(wg,t,n?e:Ag&&wg[t]||e)}catch(t){}}for(r in _g)!(o=ig[r])||o[t]&&!n||fg(o,t,e)}},isView:function(t){if(!ag(t))return!1;var e=cg(t);return"DataView"===e||sg(_g,e)||sg(Cg,e)},isTypedArray:Pg,TypedArray:wg,TypedArrayPrototype:xg},jg=o,Mg=a,Lg=Ta,Ng=Ig.NATIVE_ARRAY_BUFFER_VIEWS,Dg=jg.ArrayBuffer,Bg=jg.Int8Array,Fg=!Ng||!Mg((function(){Bg(1)}))||!Mg((function(){new Bg(-1)}))||!Lg((function(t){new Bg,new Bg(null),new Bg(1.5),new Bg(t)}),!0)||Mg((function(){return 1!==new Bg(new Dg(2),1,void 0).length})),Ug=Me,Wg=De,zg=function(t){if(void 0===t)return 0;var e=Ug(t),n=Wg(e);if(e!==n)throw RangeError("Wrong length or index");return n},Gg=Math.abs,$g=Math.pow,Vg=Math.floor,Kg=Math.log,Yg=Math.LN2,qg=H,Xg=We,Jg=De,Hg=function(t){for(var e=qg(this),n=Jg(e.length),r=arguments.length,o=Xg(r>1?arguments[1]:void 0,n),i=r>2?arguments[2]:void 0,a=void 0===i?n:Xg(i,n);a>o;)e[o++]=t;return e},Zg=o,Qg=s,tm=ng,em=Kt,nm=sl,rm=a,om=pl,im=Me,am=De,sm=zg,cm={pack:function(t,e,n){var r,o,i,a=new Array(n),s=8*n-e-1,c=(1<<s)-1,u=c>>1,f=23===e?$g(2,-24)-$g(2,-77):0,l=t<0||0===t&&1/t<0?1:0,h=0;for((t=Gg(t))!=t||t===1/0?(o=t!=t?1:0,r=c):(r=Vg(Kg(t)/Yg),t*(i=$g(2,-r))<1&&(r--,i*=2),(t+=r+u>=1?f/i:f*$g(2,1-u))*i>=2&&(r++,i/=2),r+u>=c?(o=0,r=c):r+u>=1?(o=(t*i-1)*$g(2,e),r+=u):(o=t*$g(2,u-1)*$g(2,e),r=0));e>=8;a[h++]=255&o,o/=256,e-=8);for(r=r<<e|o,s+=e;s>0;a[h++]=255&r,r/=256,s-=8);return a[--h]|=128*l,a},unpack:function(t,e){var n,r=t.length,o=8*r-e-1,i=(1<<o)-1,a=i>>1,s=o-7,c=r-1,u=t[c--],f=127&u;for(u>>=7;s>0;f=256*f+t[c],c--,s-=8);for(n=f&(1<<-s)-1,f>>=-s,s+=e;s>0;n=256*n+t[c],c--,s-=8);if(0===f)f=1-a;else{if(f===i)return n?NaN:u?-1/0:1/0;n+=$g(2,e),f-=a}return(u?-1:1)*n*$g(2,f-e)}},um=Ua,fm=as,lm=Pe.f,hm=Nt.f,pm=Hg,dm=Ja,vm=ke.get,ym=ke.set,gm="ArrayBuffer",mm="DataView",bm="Wrong index",wm=Zg.ArrayBuffer,xm=wm,km=Zg.DataView,Sm=km&&km.prototype,Tm=Object.prototype,Em=Zg.RangeError,Om=cm.pack,Am=cm.unpack,Rm=function(t){return[255&t]},_m=function(t){return[255&t,t>>8&255]},Cm=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},Pm=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},Im=function(t){return Om(t,23,4)},jm=function(t){return Om(t,52,8)},Mm=function(t,e){hm(t.prototype,e,{get:function(){return vm(this)[e]}})},Lm=function(t,e,n,r){var o=sm(n),i=vm(t);if(o+e>i.byteLength)throw Em(bm);var a=vm(i.buffer).bytes,s=o+i.byteOffset,c=a.slice(s,s+e);return r?c:c.reverse()},Nm=function(t,e,n,r,o,i){var a=sm(n),s=vm(t);if(a+e>s.byteLength)throw Em(bm);for(var c=vm(s.buffer).bytes,u=a+s.byteOffset,f=r(+o),l=0;l<e;l++)c[u+l]=f[i?l:e-l-1]};if(tm){if(!rm((function(){wm(1)}))||!rm((function(){new wm(-1)}))||rm((function(){return new wm,new wm(1.5),new wm(NaN),wm.name!=gm}))){for(var Dm,Bm=(xm=function(t){return om(this,xm),new wm(sm(t))}).prototype=wm.prototype,Fm=lm(wm),Um=0;Fm.length>Um;)(Dm=Fm[Um++])in xm||em(xm,Dm,wm[Dm]);Bm.constructor=xm}fm&&um(Sm)!==Tm&&fm(Sm,Tm);var Wm=new km(new xm(2)),zm=Sm.setInt8;Wm.setInt8(0,2147483648),Wm.setInt8(1,2147483649),!Wm.getInt8(0)&&Wm.getInt8(1)||nm(Sm,{setInt8:function(t,e){zm.call(this,t,e<<24>>24)},setUint8:function(t,e){zm.call(this,t,e<<24>>24)}},{unsafe:!0})}else xm=function(t){om(this,xm,gm);var e=sm(t);ym(this,{bytes:pm.call(new Array(e),0),byteLength:e}),Qg||(this.byteLength=e)},km=function(t,e,n){om(this,km,mm),om(t,xm,mm);var r=vm(t).byteLength,o=im(e);if(o<0||o>r)throw Em("Wrong offset");if(o+(n=void 0===n?r-o:am(n))>r)throw Em("Wrong length");ym(this,{buffer:t,byteLength:n,byteOffset:o}),Qg||(this.buffer=t,this.byteLength=n,this.byteOffset=o)},Qg&&(Mm(xm,"byteLength"),Mm(km,"buffer"),Mm(km,"byteLength"),Mm(km,"byteOffset")),nm(km.prototype,{getInt8:function(t){return Lm(this,1,t)[0]<<24>>24},getUint8:function(t){return Lm(this,1,t)[0]},getInt16:function(t){var e=Lm(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Lm(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return Pm(Lm(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return Pm(Lm(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return Am(Lm(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return Am(Lm(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){Nm(this,1,t,Rm,e)},setUint8:function(t,e){Nm(this,1,t,Rm,e)},setInt16:function(t,e){Nm(this,2,t,_m,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){Nm(this,2,t,_m,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){Nm(this,4,t,Cm,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){Nm(this,4,t,Cm,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){Nm(this,4,t,Im,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){Nm(this,8,t,jm,e,arguments.length>2?arguments[2]:void 0)}});dm(xm,gm),dm(km,mm);var Gm=Me,$m=function(t){var e=Gm(t);if(e<0)throw RangeError("The argument can't be less than 0");return e},Vm=function(t,e){var n=$m(t);if(n%e)throw RangeError("Wrong offset");return n},Km=H,Ym=De,qm=la,Xm=ca,Jm=oa,Hm=vi,Zm=Ig.aTypedArrayConstructor,Qm=Rn,tb=o,eb=s,nb=Fg,rb=Ig,ob={ArrayBuffer:xm,DataView:km},ib=pl,ab=d,sb=Kt,cb=qu,ub=De,fb=zg,lb=Vm,hb=xt,pb=tt,db=Wo,vb=T,yb=W,gb=Xn,mb=as,bb=Pe.f,wb=function(t){var e,n,r,o,i,a,s=Km(t),c=arguments.length,u=c>1?arguments[1]:void 0,f=void 0!==u,l=Xm(s);if(null!=l&&!Jm(l))for(a=(i=qm(s,l)).next,s=[];!(o=a.call(i)).done;)s.push(o.value);for(f&&c>2&&(u=Hm(u,arguments[2],2)),n=Ym(s.length),r=new(Zm(this))(n),e=0;n>e;e++)r[e]=f?u(s[e],e):s[e];return r},xb=Si.forEach,kb=hl,Sb=Nt,Tb=i,Eb=Hu,Ob=ke.get,Ab=ke.set,Rb=Sb.f,_b=Tb.f,Cb=Math.round,Pb=tb.RangeError,Ib=ob.ArrayBuffer,jb=ob.DataView,Mb=rb.NATIVE_ARRAY_BUFFER_VIEWS,Lb=rb.TYPED_ARRAY_CONSTRUCTOR,Nb=rb.TYPED_ARRAY_TAG,Db=rb.TypedArray,Bb=rb.TypedArrayPrototype,Fb=rb.aTypedArrayConstructor,Ub=rb.isTypedArray,Wb="BYTES_PER_ELEMENT",zb="Wrong length",Gb=function(t,e){for(var n=0,r=e.length,o=new(Fb(t))(r);r>n;)o[n]=e[n++];return o},$b=function(t,e){Rb(t,e,{get:function(){return Ob(this)[e]}})},Vb=function(t){var e;return t instanceof Ib||"ArrayBuffer"==(e=db(t))||"SharedArrayBuffer"==e},Kb=function(t,e){return Ub(t)&&!yb(e)&&e in t&&cb(+e)&&e>=0},Yb=function(t,e){return e=hb(e),Kb(t,e)?ab(2,t[e]):_b(t,e)},qb=function(t,e,n){return e=hb(e),!(Kb(t,e)&&vb(n)&&pb(n,"value"))||pb(n,"get")||pb(n,"set")||n.configurable||pb(n,"writable")&&!n.writable||pb(n,"enumerable")&&!n.enumerable?Rb(t,e,n):(t[e]=n.value,t)};eb?(Mb||(Tb.f=Yb,Sb.f=qb,$b(Bb,"buffer"),$b(Bb,"byteOffset"),$b(Bb,"byteLength"),$b(Bb,"length")),Qm({target:"Object",stat:!0,forced:!Mb},{getOwnPropertyDescriptor:Yb,defineProperty:qb}),eg.exports=function(t,e,n){var r=t.match(/\d+$/)[0]/8,o=t+(n?"Clamped":"")+"Array",i="get"+t,a="set"+t,s=tb[o],c=s,u=c&&c.prototype,f={},l=function(t,e){Rb(t,e,{get:function(){return function(t,e){var n=Ob(t);return n.view[i](e*r+n.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,o){var i=Ob(t);n&&(o=(o=Cb(o))<0?0:o>255?255:255&o),i.view[a](e*r+i.byteOffset,o,!0)}(this,e,t)},enumerable:!0})};Mb?nb&&(c=e((function(t,e,n,i){return ib(t,c,o),Eb(vb(e)?Vb(e)?void 0!==i?new s(e,lb(n,r),i):void 0!==n?new s(e,lb(n,r)):new s(e):Ub(e)?Gb(c,e):wb.call(c,e):new s(fb(e)),t,c)})),mb&&mb(c,Db),xb(bb(s),(function(t){t in c||sb(c,t,s[t])})),c.prototype=u):(c=e((function(t,e,n,i){ib(t,c,o);var a,s,u,f=0,h=0;if(vb(e)){if(!Vb(e))return Ub(e)?Gb(c,e):wb.call(c,e);a=e,h=lb(n,r);var p=e.byteLength;if(void 0===i){if(p%r)throw Pb(zb);if((s=p-h)<0)throw Pb(zb)}else if((s=ub(i)*r)+h>p)throw Pb(zb);u=s/r}else u=fb(e),a=new Ib(s=u*r);for(Ab(t,{buffer:a,byteOffset:h,byteLength:s,length:u,view:new jb(a)});f<u;)l(t,f++)})),mb&&mb(c,Db),u=c.prototype=gb(Bb)),u.constructor!==c&&sb(u,"constructor",c),sb(u,Lb,c),Nb&&sb(u,Nb,o),f[o]=c,Qm({global:!0,forced:c!=s,sham:!Mb},f),Wb in c||sb(c,Wb,r),Wb in u||sb(u,Wb,r),kb(o)}):eg.exports=function(){},(0,eg.exports)("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}));var Xb=H,Jb=We,Hb=De,Zb=Math.min,Qb=[].copyWithin||function(t,e){var n=Xb(this),r=Hb(n.length),o=Jb(t,r),i=Jb(e,r),a=arguments.length>2?arguments[2]:void 0,s=Zb((void 0===a?r:Jb(a,r))-i,r-o),c=1;for(i<o&&o<i+s&&(c=-1,i+=s-1,o+=s-1);s-- >0;)i in n?n[o]=n[i]:delete n[o],o+=c,i+=c;return n},tw=Ig.aTypedArray;(0,Ig.exportTypedArrayMethod)("copyWithin",(function(t,e){return Qb.call(tw(this),t,e,arguments.length>2?arguments[2]:void 0)}));var ew=Si.every,nw=Ig.aTypedArray;(0,Ig.exportTypedArrayMethod)("every",(function(t){return ew(nw(this),t,arguments.length>1?arguments[1]:void 0)}));var rw=Hg,ow=Ig.aTypedArray;(0,Ig.exportTypedArrayMethod)("fill",(function(t){return rw.apply(ow(this),arguments)}));var iw=Ol,aw=Ig.TYPED_ARRAY_CONSTRUCTOR,sw=Ig.aTypedArrayConstructor,cw=function(t){return sw(iw(t,t[aw]))},uw=function(t,e){for(var n=0,r=e.length,o=new t(r);r>n;)o[n]=e[n++];return o},fw=cw,lw=Si.filter,hw=function(t,e){return uw(fw(t),e)},pw=Ig.aTypedArray;(0,Ig.exportTypedArrayMethod)("filter",(function(t){var e=lw(pw(this),t,arguments.length>1?arguments[1]:void 0);return hw(this,e)}));var dw=Si.find,vw=Ig.aTypedArray;(0,Ig.exportTypedArrayMethod)("find",(function(t){return dw(vw(this),t,arguments.length>1?arguments[1]:void 0)}));var yw=Si.findIndex,gw=Ig.aTypedArray;(0,Ig.exportTypedArrayMethod)("findIndex",(function(t){return yw(gw(this),t,arguments.length>1?arguments[1]:void 0)}));var mw=Si.forEach,bw=Ig.aTypedArray;(0,Ig.exportTypedArrayMethod)("forEach",(function(t){mw(bw(this),t,arguments.length>1?arguments[1]:void 0)}));var ww=Ke.includes,xw=Ig.aTypedArray;(0,Ig.exportTypedArrayMethod)("includes",(function(t){return ww(xw(this),t,arguments.length>1?arguments[1]:void 0)}));var kw=Ke.indexOf,Sw=Ig.aTypedArray;(0,Ig.exportTypedArrayMethod)("indexOf",(function(t){return kw(Sw(this),t,arguments.length>1?arguments[1]:void 0)}));var Tw=o,Ew=Ig,Ow=Su,Aw=pt("iterator"),Rw=Tw.Uint8Array,_w=Ow.values,Cw=Ow.keys,Pw=Ow.entries,Iw=Ew.aTypedArray,jw=Ew.exportTypedArrayMethod,Mw=Rw&&Rw.prototype[Aw],Lw=!!Mw&&("values"==Mw.name||null==Mw.name),Nw=function(){return _w.call(Iw(this))};jw("entries",(function(){return Pw.call(Iw(this))})),jw("keys",(function(){return Cw.call(Iw(this))})),jw("values",Nw,!Lw),jw(Aw,Nw,!Lw);var Dw=Ig.aTypedArray,Bw=[].join;(0,Ig.exportTypedArrayMethod)("join",(function(t){return Bw.apply(Dw(this),arguments)}));var Fw=S,Uw=Me,Ww=De,zw=ci,Gw=Math.min,$w=[].lastIndexOf,Vw=!!$w&&1/[1].lastIndexOf(1,-0)<0,Kw=zw("lastIndexOf"),Yw=Vw||!Kw?function(t){if(Vw)return $w.apply(this,arguments)||0;var e=Fw(this),n=Ww(e.length),r=n-1;for(arguments.length>1&&(r=Gw(r,Uw(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}:$w,qw=Ig.aTypedArray;(0,Ig.exportTypedArrayMethod)("lastIndexOf",(function(t){return Yw.apply(qw(this),arguments)}));var Xw=Si.map,Jw=cw,Hw=Ig.aTypedArray;(0,Ig.exportTypedArrayMethod)("map",(function(t){return Xw(Hw(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(Jw(t))(e)}))}));var Zw=_n,Qw=H,tx=b,ex=De,nx=function(t){return function(e,n,r,o){Zw(n);var i=Qw(e),a=tx(i),s=ex(i.length),c=t?s-1:0,u=t?-1:1;if(r<2)for(;;){if(c in a){o=a[c],c+=u;break}if(c+=u,t?c<0:s<=c)throw TypeError("Reduce of empty array with no initial value")}for(;t?c>=0:s>c;c+=u)c in a&&(o=n(o,a[c],c,i));return o}},rx={left:nx(!1),right:nx(!0)},ox=rx.left,ix=Ig.aTypedArray;(0,Ig.exportTypedArrayMethod)("reduce",(function(t){return ox(ix(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}));var ax=rx.right,sx=Ig.aTypedArray;(0,Ig.exportTypedArrayMethod)("reduceRight",(function(t){return ax(sx(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}));var cx=Ig.aTypedArray,ux=Ig.exportTypedArrayMethod,fx=Math.floor;ux("reverse",(function(){for(var t,e=this,n=cx(e).length,r=fx(n/2),o=0;o<r;)t=e[o],e[o++]=e[--n],e[n]=t;return e}));var lx=De,hx=Vm,px=H,dx=Ig.aTypedArray;(0,Ig.exportTypedArrayMethod)("set",(function(t){dx(this);var e=hx(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=px(t),o=lx(r.length),i=0;if(o+e>n)throw RangeError("Wrong length");for(;i<o;)this[e+i]=r[i++]}),a((function(){new Int8Array(1).set({})})));var vx=cw,yx=Ig.aTypedArray,gx=[].slice;(0,Ig.exportTypedArrayMethod)("slice",(function(t,e){for(var n=gx.call(yx(this),t,e),r=vx(this),o=0,i=n.length,a=new r(i);i>o;)a[o]=n[o++];return a}),a((function(){new Int8Array(1).slice()})));var mx=Si.some,bx=Ig.aTypedArray;(0,Ig.exportTypedArrayMethod)("some",(function(t){return mx(bx(this),t,arguments.length>1?arguments[1]:void 0)}));var wx=Math.floor,xx=function(t,e){var n=t.length,r=wx(n/2);return n<8?kx(t,e):Sx(xx(t.slice(0,r),e),xx(t.slice(r),e),e)},kx=function(t,e){for(var n,r,o=t.length,i=1;i<o;){for(r=i,n=t[i];r&&e(t[r-1],n)>0;)t[r]=t[--r];r!==i++&&(t[r]=n)}return t},Sx=function(t,e,n){for(var r=t.length,o=e.length,i=0,a=0,s=[];i<r||a<o;)i<r&&a<o?s.push(n(t[i],e[a])<=0?t[i++]:e[a++]):s.push(i<r?t[i++]:e[a++]);return s},Tx=xx,Ex=R.match(/firefox\/(\d+)/i),Ox=!!Ex&&+Ex[1],Ax=/MSIE|Trident/.test(R),Rx=R.match(/AppleWebKit\/(\d+)\./),_x=!!Rx&&+Rx[1],Cx=a,Px=_n,Ix=De,jx=Tx,Mx=Ox,Lx=Ax,Nx=L,Dx=_x,Bx=Ig.aTypedArray,Fx=Ig.exportTypedArrayMethod,Ux=o.Uint16Array,Wx=Ux&&Ux.prototype.sort,zx=!!Wx&&!Cx((function(){var t=new Ux(2);t.sort(null),t.sort({})})),Gx=!!Wx&&!Cx((function(){if(Nx)return Nx<74;if(Mx)return Mx<67;if(Lx)return!0;if(Dx)return Dx<602;var t,e,n=new Ux(516),r=Array(516);for(t=0;t<516;t++)e=t%4,n[t]=515-t,r[t]=t-2*e+3;for(n.sort((function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(n[t]!==r[t])return!0}));Fx("sort",(function(t){var e=this;if(void 0!==t&&Px(t),Gx)return Wx.call(e,t);Bx(e);var n,r=Ix(e.length),o=Array(r);for(n=0;n<r;n++)o[n]=e[n];for(o=jx(e,function(t){return function(e,n){return void 0!==t?+t(e,n)||0:n!=n?-1:e!=e?1:0===e&&0===n?1/e>0&&1/n<0?1:-1:e>n}}(t)),n=0;n<r;n++)e[n]=o[n];return e}),!Gx||zx);var $x=De,Vx=We,Kx=cw,Yx=Ig.aTypedArray;(0,Ig.exportTypedArrayMethod)("subarray",(function(t,e){var n=Yx(this),r=n.length,o=Vx(t,r);return new(Kx(n))(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,$x((void 0===e?r:Vx(e,r))-o))}));var qx=Ig,Xx=a,Jx=o.Int8Array,Hx=qx.aTypedArray,Zx=qx.exportTypedArrayMethod,Qx=[].toLocaleString,tk=[].slice,ek=!!Jx&&Xx((function(){Qx.call(new Jx(1))}));Zx("toLocaleString",(function(){return Qx.apply(ek?tk.call(Hx(this)):Hx(this),arguments)}),Xx((function(){return[1,2].toLocaleString()!=new Jx([1,2]).toLocaleString()}))||!Xx((function(){Jx.prototype.toLocaleString.call([1,2])})));var nk=Ig.exportTypedArrayMethod,rk=a,ok=o.Uint8Array,ik=ok&&ok.prototype||{},ak=[].toString,sk=[].join;rk((function(){ak.call({})}))&&(ak=function(){return sk.call(this)});var ck=ik.toString!=ak;nk("toString",ak,ck);var uk=T,fk=y,lk=pt("match"),hk=Oy,pk=function(t){var e;return uk(t)&&(void 0!==(e=t[lk])?!!e:"RegExp"==fk(t))},dk=Bt,vk=w,yk=Ol,gk=Ry,mk=De,bk=qo,wk=Ny,xk=my,kk=a,Sk=Yv.UNSUPPORTED_Y,Tk=[].push,Ek=Math.min,Ok=4294967295;function Ak(t){return encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))})).length}function Rk(t){var e=encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))})),n=new Uint8Array(e.length);return Array.prototype.forEach.call(e,(function(t,e){n[e]=t.charCodeAt(0)})),n}function _k(t){var e=Array.prototype.map.call(t,(function(t){return String.fromCharCode(t)})).join("").replace(/(.)/g,(function(t,e){var n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}));return decodeURIComponent(e)}function Ck(t){return JSON.parse(_k(t))}hk("split",(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=bk(vk(this)),o=void 0===n?Ok:n>>>0;if(0===o)return[];if(void 0===t)return[r];if(!pk(t))return e.call(r,t,o);for(var i,a,s,c=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,l=new RegExp(t.source,u+"g");(i=xk.call(l,r))&&!((a=l.lastIndex)>f&&(c.push(r.slice(f,i.index)),i.length>1&&i.index<r.length&&Tk.apply(c,i.slice(1)),s=i[0].length,f=a,c.length>=o));)l.lastIndex===i.index&&l.lastIndex++;return f===r.length?!s&&l.test("")||c.push(""):c.push(r.slice(f)),c.length>o?c.slice(0,o):c}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var o=vk(this),i=null==e?void 0:e[t];return void 0!==i?i.call(e,o,n):r.call(bk(o),e,n)},function(t,o){var i=dk(this),a=bk(t),s=n(r,i,a,o,r!==e);if(s.done)return s.value;var c=yk(i,RegExp),u=i.unicode,f=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(Sk?"g":"y"),l=new c(Sk?"^(?:"+i.source+")":i,f),h=void 0===o?Ok:o>>>0;if(0===h)return[];if(0===a.length)return null===wk(l,a)?[a]:[];for(var p=0,d=0,v=[];d<a.length;){l.lastIndex=Sk?0:d;var y,g=wk(l,Sk?a.slice(d):a);if(null===g||(y=Ek(mk(l.lastIndex+(Sk?d:0)),a.length))===p)d=gk(a,d,u);else{if(v.push(a.slice(p,d)),v.length===h)return v;for(var m=1;m<=g.length-1;m++)if(v.push(g[m]),v.length===h)return v;d=p=y}}return v.push(a.slice(p)),v}]}),!!kk((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),Sk);var Pk=function(){function t(){Tr(this,t)}return yr(t,null,[{key:"parse",value:function(t){var e,n,r=new Uint8Array(t),o=function(t){for(var e="",n=0;n<t.length;++n){var r=String.fromCharCode(t[n]);if(e+=r,"\r"===r){n+=2;break}}var o=e.split(" ");return{size:n,protocol:o[0],version:o[1],headerSize:Number(o[2])}}(r);if("TWILSOCK"!==o.protocol||"V3.0"!==o.version)return bd.error("unsupported protocol: ".concat(o.protocol," ver ").concat(o.version)),null;try{e=Ck(r.subarray(o.size,o.size+o.headerSize))}catch(e){return bd.error("failed to parse message header",e,t),null}if(bd.debug("message received: ",e.method),bd.trace("message received: ",e),e.payload_size>0){var i=2+o.size+o.headerSize,a=e.payload_size;if(e.hasOwnProperty("payload_type")&&0!==e.payload_type.indexOf("application/json"))0===e.payload_type.indexOf("text/plain")&&(n=_k(r.subarray(i,i+a)));else try{n=Ck(r.subarray(i,i+a))}catch(e){return bd.error("failed to parse message body",e,t),null}}return{method:e.method,header:e,payload:n}}},{key:"createPacket",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t.payload_size=Ak(e);var n=JSON.stringify(t),r="TWILSOCK V3.0 "+Ak(n);bd.debug("send request:",r+n+e);var o=Rk(r+"\r\n"+n+"\r\n"+e);return o.buffer}}]),t}();function Ik(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function jk(t,e,n){return(jk=Ik()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&wr(o,n.prototype),o}).apply(null,arguments)}function Mk(t){var e="function"==typeof Map?new Map:void 0;return(Mk=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return jk(t,arguments,mr(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),wr(r,t)})(t)}function Lk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mr(t);if(e){var o=mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Sr(this,n)}}var Nk=function(t){xr(n,t);var e=Lk(n);function n(t){return Tr(this,n),e.call(this,t)}return n}(Mk(Error));function Dk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mr(t);if(e){var o=mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Sr(this,n)}}var Bk=function(t){xr(n,t);var e=Dk(n);function n(t,r){var o;return Tr(this,n),(o=e.call(this,t)).reply=r,o}return n}(Nk),Fk=H,Uk=In;Rn({target:"Object",stat:!0,forced:a((function(){Uk(1)}))},{keys:function(t){return Uk(Fk(t))}});var Wk=Si.filter;Rn({target:"Array",proto:!0,forced:!mo("filter")},{filter:function(t){return Wk(this,t,arguments.length>1?arguments[1]:void 0)}});var zk=Rn,Gk=a,$k=S,Vk=i.f,Kk=s,Yk=Gk((function(){Vk(1)}));zk({target:"Object",stat:!0,forced:!Kk||Yk,sham:!Kk},{getOwnPropertyDescriptor:function(t,e){return Vk($k(t),e)}});var qk=Si.forEach,Xk=o,Jk=Tu,Hk=Au,Zk=ci("forEach")?[].forEach:function(t){return qk(this,t,arguments.length>1?arguments[1]:void 0)},Qk=Kt,tS=function(t){if(t&&t.forEach!==Zk)try{Qk(t,"forEach",Zk)}catch(e){t.forEach=Zk}};for(var eS in Jk)tS(Xk[eS]&&Xk[eS].prototype);tS(Hk);var nS=sn,rS=S,oS=i,iS=co;Rn({target:"Object",stat:!0,sham:!s},{getOwnPropertyDescriptors:function(t){for(var e,n,r=rS(t),o=oS.f,i=nS(r),a={},s=0;i.length>s;)void 0!==(n=o(r,e=i[s++]))&&iS(a,e,n);return a}});var aS={},sS={exports:{}};!function(t){function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t},t.exports.default=t.exports,t.exports.__esModule=!0}(sS);var cS={exports:{}};!function(t){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.default=t.exports,t.exports.__esModule=!0}(cS),Object.defineProperty(aS,"__esModule",{value:!0});var uS=sS.exports,fS=Hf.exports,lS=qf.exports,hS=Jf.exports,pS=Zf.exports,dS=cS.exports;function vS(t){return t&&"object"===kr(t)&&"default"in t?t:{default:t}}var yS=vS(Yf.exports),gS=vS(uS),mS=vS(fS),bS=vS(lS),wS=vS(hS),xS=vS(pS),kS=vS(dS);function SS(){}function TS(){TS.init.call(this)}function ES(t){return void 0===t._maxListeners?TS.defaultMaxListeners:t._maxListeners}function OS(t,e,n){if(e)t.call(n);else for(var r=t.length,o=MS(t,r),i=0;i<r;++i)o[i].call(n)}function AS(t,e,n,r){if(e)t.call(n,r);else for(var o=t.length,i=MS(t,o),a=0;a<o;++a)i[a].call(n,r)}function RS(t,e,n,r,o){if(e)t.call(n,r,o);else for(var i=t.length,a=MS(t,i),s=0;s<i;++s)a[s].call(n,r,o)}function _S(t,e,n,r,o,i){if(e)t.call(n,r,o,i);else for(var a=t.length,s=MS(t,a),c=0;c<a;++c)s[c].call(n,r,o,i)}function CS(t,e,n,r){if(e)t.apply(n,r);else for(var o=t.length,i=MS(t,o),a=0;a<o;++a)i[a].apply(n,r)}function PS(t,e,n,r){var o,i,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((i=t._events)?(i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]):(i=t._events=new SS,t._eventsCount=0),a){if("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(o=ES(t))&&o>0&&a.length>o){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,s=c,"function"==typeof console.warn?console.warn(s):console.log(s)}}else a=i[e]=n,++t._eventsCount;return t}function IS(t,e,n){var r=!1;function o(){t.removeListener(e,o),r||(r=!0,n.apply(t,arguments))}return o.listener=n,o}function jS(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function MS(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}function LS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xS.default(t);if(e){var o=xS.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wS.default(this,n)}}SS.prototype=Object.create(null),TS.EventEmitter=TS,TS.usingDomains=!1,TS.prototype.domain=void 0,TS.prototype._events=void 0,TS.prototype._maxListeners=void 0,TS.defaultMaxListeners=10,TS.init=function(){this.domain=null,TS.usingDomains&&undefined.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new SS,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},TS.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},TS.prototype.getMaxListeners=function(){return ES(this)},TS.prototype.emit=function(t){var e,n,r,o,i,a,s,c="error"===t;if(a=this._events)c=c&&null==a.error;else if(!c)return!1;if(s=this.domain,c){if(e=arguments[1],!s){if(e instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=s,e.domainThrown=!1,s.emit("error",e),!1}if(!(n=a[t]))return!1;var f="function"==typeof n;switch(r=arguments.length){case 1:OS(n,f,this);break;case 2:AS(n,f,this,arguments[1]);break;case 3:RS(n,f,this,arguments[1],arguments[2]);break;case 4:_S(n,f,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(r-1),i=1;i<r;i++)o[i-1]=arguments[i];CS(n,f,this,o)}return!0},TS.prototype.addListener=function(t,e){return PS(this,t,e,!1)},TS.prototype.on=TS.prototype.addListener,TS.prototype.prependListener=function(t,e){return PS(this,t,e,!0)},TS.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,IS(this,t,e)),this},TS.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,IS(this,t,e)),this},TS.prototype.removeListener=function(t,e){var n,r,o,i,a;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new SS:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length;i-- >0;)if(n[i]===e||n[i].listener&&n[i].listener===e){a=n[i].listener,o=i;break}if(o<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new SS,this;delete r[t]}else!function(t,e){for(var n=e,r=n+1,o=t.length;r<o;n+=1,r+=1)t[n]=t[r];t.pop()}(n,o);r.removeListener&&this.emit("removeListener",t,a||e)}return this},TS.prototype.off=function(t,e){return this.removeListener(t,e)},TS.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new SS,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new SS:delete n[t]),this;if(0===arguments.length){for(var r,o=Object.keys(n),i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new SS,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1])}while(e[0]);return this},TS.prototype.listeners=function(t){var e,n=this._events;return n&&(e=n[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):[]},TS.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):jS.call(t,e)},TS.prototype.listenerCount=jS,TS.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var NS=function(t){bS.default(n,t);var e=LS(n);function n(t){var r;return yS.default(this,n),r=e.call(this),kS.default(mS.default(r),"timeout",null),kS.default(mS.default(r),"startTimestamp",-1),r.minDelay=t.min,r.maxDelay=t.max,r.initialDelay=t.initial||0,r.maxAttemptsCount=t.maxAttemptsCount||0,r.maxAttemptsTime=t.maxAttemptsTime||0,r.randomness=t.randomness||0,r.inProgress=!1,r.attemptNum=0,r.prevDelay=0,r.currDelay=0,r}return gS.default(n,[{key:"attempt",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.attemptNum++,this.emit("attempt",this)}},{key:"nextDelay",value:function(t){if("number"==typeof t)return this.prevDelay=0,this.currDelay=t,t;if(0==this.attemptNum)return this.initialDelay;if(1==this.attemptNum)return this.currDelay=this.minDelay,this.currDelay;this.prevDelay=this.currDelay;var e=this.currDelay+this.prevDelay;return this.maxDelay&&e>this.maxDelay&&(this.currDelay=this.maxDelay,e=this.maxDelay),this.currDelay=e,e}},{key:"randomize",value:function(t){var e=t*this.randomness,n=Math.round(Math.random()*e*2-e);return Math.max(0,t+n)}},{key:"scheduleAttempt",value:function(t){var e=this;if(this.maxAttemptsCount&&this.attemptNum>=this.maxAttemptsCount)return this.cleanup(),void this.emit("failed",new Error("Maximum attempt count limit reached"));var n=this.nextDelay(t);if(n=this.randomize(n),this.maxAttemptsTime&&this.startTimestamp+this.maxAttemptsTime<Date.now()+n)return this.cleanup(),void this.emit("failed",new Error("Maximum attempt time limit reached"));this.timeout=setTimeout((function(){return e.attempt()}),n)}},{key:"cleanup",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.inProgress=!1,this.attemptNum=0,this.prevDelay=0,this.currDelay=0}},{key:"start",value:function(){if(this.inProgress)throw new Error("Retrier is already in progress");this.inProgress=!0,this.startTimestamp=Date.now(),this.scheduleAttempt(this.initialDelay)}},{key:"cancel",value:function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null,this.inProgress=!1,this.emit("cancelled"))}},{key:"succeeded",value:function(t){this.emit("succeeded",t)}},{key:"failed",value:function(t,e){if(this.timeout)throw new Error("Retrier attempt is already in progress");this.scheduleAttempt(e)}}]),n}(TS),DS=function(t){bS.default(n,t);var e=LS(n);function n(t){var r;return yS.default(this,n),r=e.call(this),kS.default(mS.default(r),"resolve",(function(){})),kS.default(mS.default(r),"reject",(function(){})),r.retrier=new NS(t),r}return gS.default(n,[{key:"run",value:function(t){var e=this;return this.retrier.on("attempt",(function(){t().then((function(t){return e.retrier.succeeded(t)})).catch((function(t){return e.retrier.failed(t)}))})),this.retrier.on("succeeded",(function(t){return e.resolve(t)})),this.retrier.on("cancelled",(function(){return e.reject(new Error("Cancelled"))})),this.retrier.on("failed",(function(t){return e.reject(t)})),new Promise((function(t,n){e.resolve=t,e.reject=n,e.retrier.start()}))}},{key:"cancel",value:function(){this.retrier.cancel()}}]),n}(TS);function BS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xS.default(t);if(e){var o=xS.default(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wS.default(this,n)}}function FS(t){return null!=t}var US=function(t){bS.default(n,t);var e=BS(n);function n(t){var r;yS.default(this,n),r=e.call(this),kS.default(mS.default(r),"backoffDelay",0),kS.default(mS.default(r),"nextBackoffDelay",0),kS.default(mS.default(r),"backoffNumber",0),kS.default(mS.default(r),"timeoutID",null),kS.default(mS.default(r),"maxNumberOfRetry",-1);var o=t=t||{},i=o.initialDelay,a=o.maxDelay,s=o.randomisationFactor,c=o.factor;if(FS(i)&&i<1)throw new Error("The initial timeout must be equal to or greater than 1.");if(FS(a)&&a<=1)throw new Error("The maximal timeout must be greater than 1.");if(FS(s)&&(s<0||s>1))throw new Error("The randomisation factor must be between 0 and 1.");if(FS(c)&&c<=1)throw new Error("Exponential factor should be greater than 1.");if(r.initialDelay=i||100,r.maxDelay=a||1e4,r.maxDelay<=r.initialDelay)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");return r.randomisationFactor=s||0,r.factor=c||2,r.reset(),r}return gS.default(n,[{key:"backoff",value:function(t){null==this.timeoutID&&(this.backoffNumber===this.maxNumberOfRetry?(this.emit("fail",t),this.reset()):(this.backoffDelay=this.next(),this.timeoutID=setTimeout(this.onBackoff.bind(this),this.backoffDelay),this.emit("backoff",this.backoffNumber,this.backoffDelay,t)))}},{key:"reset",value:function(){this.backoffDelay=0,this.nextBackoffDelay=this.initialDelay,this.backoffNumber=0,this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=null}},{key:"failAfter",value:function(t){if(t<=0)throw new Error("Expected a maximum number of retry greater than 0 but got ".concat(t));this.maxNumberOfRetry=t}},{key:"next",value:function(){this.backoffDelay=Math.min(this.nextBackoffDelay,this.maxDelay),this.nextBackoffDelay=this.backoffDelay*this.factor;var t=1+Math.random()*this.randomisationFactor;return Math.min(this.maxDelay,Math.round(this.backoffDelay*t))}},{key:"onBackoff",value:function(){this.timeoutID=null,this.emit("ready",this.backoffNumber,this.backoffDelay),this.backoffNumber++}}],[{key:"exponential",value:function(t){return new n(t)}}]),n}(TS);aS.AsyncRetrier=DS,aS.Backoff=US;var WS=aS.Retrier=NS;function zS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function GS(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zS(Object(n),!0).forEach((function(e){Er(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mr(t);if(e){var o=mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Sr(this,n)}}var VS=function(t){xr(n,t);var e=$S(n);function n(t){var r;return Tr(this,n),Er(gr(r=e.call(this)),"newBackoff",null),Er(gr(r),"usedBackoff",null),Er(gr(r),"retrier",null),r.options=t?GS({},t):{},r}return yr(n,[{key:"inProgress",get:function(){return!!this.retrier}},{key:"start",value:function(){if(this.inProgress)throw new Error("Already waiting for next attempt, call finishAttempt(success : boolean) to finish it");this.createRetrier()}},{key:"stop",value:function(){this.cleanRetrier(),this.newBackoff=null,this.usedBackoff=null}},{key:"modifyBackoff",value:function(t){this.newBackoff=t}},{key:"attemptFailed",value:function(){if(!this.inProgress)throw new Error("No attempt is in progress");var t,e;this.newBackoff?!this.usedBackoff||this.usedBackoff<this.newBackoff?this.createRetrier():null===(t=this.retrier)||void 0===t||t.failed(new Error):null===(e=this.retrier)||void 0===e||e.failed(new Error)}},{key:"cancel",value:function(){var t;null===(t=this.retrier)||void 0===t||t.cancel()}},{key:"cleanRetrier",value:function(){var t,e;null===(t=this.retrier)||void 0===t||t.removeAllListeners(),null===(e=this.retrier)||void 0===e||e.cancel(),this.retrier=null}},{key:"getRetryPolicy",value:function(){var t=GS({},this.options);return this.newBackoff&&(t.min=this.newBackoff,t.max=this.options.max&&this.options.max>this.newBackoff?this.options.max:this.newBackoff),t.maxAttemptsCount=this.options.maxAttemptsCount?this.options.maxAttemptsCount+1:void 0,t}},{key:"createRetrier",value:function(){var t=this;this.cleanRetrier();var e=this.getRetryPolicy();this.retrier=new WS(e),this.retrier.once("attempt",(function(){var e,n;null===(e=t.retrier)||void 0===e||e.on("attempt",(function(){return t.emit("attempt")})),null===(n=t.retrier)||void 0===n||n.failed(new Error("Skipping first attempt"))})),this.retrier.on("failed",(function(e){return t.emit("failed",e)})),this.usedBackoff=this.newBackoff,this.newBackoff=null,this.retrier.start()}}]),n}(Oi);function KS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mr(t);if(e){var o=mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Sr(this,n)}}var YS=function(t){xr(o,t);var e,n,r=KS(o);function o(t,e,n){var i;Tr(this,o),Er(gr(i=r.call(this)),"disconnectingTimer",null),Er(gr(i),"disconnectedPromiseResolve",null),Er(gr(i),"terminalStates",["disconnected","rejected"]),Er(gr(i),"tokenExpiredSasCode",20104),Er(gr(i),"terminationReason","Connection is not initialized"),i.websocket=t,i.websocket.on("connected",(function(){return i.fsm.socketConnected()})),i.websocket.on("disconnected",(function(){return i.fsm.socketClosed()})),i.websocket.on("message",(function(t){return i.onIncomingMessage(t)})),i.websocket.on("socketError",(function(t){return i.emit("connectionError",{terminal:!1,message:"Socket error: ".concat(t.message),httpStatusCode:null,errorCode:null})})),i.transport=e,i.config=n,i.retrier=new VS(n.retryPolicy),i.retrier.on("attempt",(function(){return i.retry()})),i.retrier.on("failed",(function(t){bd.warn("Retrying failed: ".concat(t.message)),i.disconnect()})),"undefined"!=typeof window&&void 0!==window.addEventListener&&(window.addEventListener("online",(function(){bd.debug("Browser reported connectivity state: online"),i.resetBackoff(),i.fsm.systemOnline()})),window.addEventListener("offline",(function(){bd.debug("Browser reported connectivity state: offline"),i.websocket.close(),i.fsm.socketClosed()})));var a=fv.exports.factory({init:"disconnected",transitions:[{name:"userConnect",from:["disconnected","rejected"],to:"connecting"},{name:"userConnect",from:["connecting","connected"]},{name:"userDisconnect",from:["connecting","initialising","connected","updating","retrying","rejected","waitSocketClosed","waitOffloadSocketClosed"],to:"disconnecting"},{name:"userRetry",from:["retrying"],to:"connecting"},{name:"socketConnected",from:["connecting"],to:"initialising"},{name:"socketClosed",from:["connecting","initialising","connected","updating","error","waitOffloadSocketClosed"],to:"retrying"},{name:"socketClosed",from:["disconnecting"],to:"disconnected"},{name:"socketClosed",from:["waitSocketClosed"],to:"disconnected"},{name:"socketClosed",from:["rejected"],to:"rejected"},{name:"initSuccess",from:["initialising"],to:"connected"},{name:"initError",from:["initialising"],to:"error"},{name:"tokenRejected",from:["initialising","updating"],to:"rejected"},{name:"protocolError",from:["initialising","connected","updating"],to:"error"},{name:"receiveClose",from:["initialising","connected","updating"],to:"waitSocketClosed"},{name:"receiveOffload",from:["initialising","connected","updating"],to:"waitOffloadSocketClosed"},{name:"unsupportedProtocol",from:["initialising","connected","updating"],to:"unsupported"},{name:"receiveFatalClose",from:["initialising","connected","updating"],to:"unsupported"},{name:"userUpdateToken",from:["disconnected","rejected","connecting","retrying"],to:"connecting"},{name:"userUpdateToken",from:["connected"],to:"updating"},{name:"updateSuccess",from:["updating"],to:"connected"},{name:"updateError",from:["updating"],to:"error"},{name:"userSend",from:["connected"],to:"connected"},{name:"systemOnline",from:["retrying"],to:"connecting"}],methods:{onConnecting:function(){i.setupSocket(),i.emit("connecting")},onEnterInitialising:function(){i.sendInit()},onLeaveInitialising:function(){i.cancelInit()},onEnterUpdating:function(){i.sendUpdate()},onLeaveUpdating:function(){i.cancelUpdate()},onEnterRetrying:function(){i.initRetry(),i.emit("connecting")},onEnterConnected:function(){i.resetBackoff(),i.onConnected()},onUserUpdateToken:function(){i.resetBackoff()},onTokenRejected:function(){i.resetBackoff(),i.closeSocket(!0),i.finalizeSocket()},onUserDisconnect:function(){i.closeSocket(!0)},onEnterDisconnecting:function(){i.startDisconnectTimer()},onLeaveDisconnecting:function(){i.cancelDisconnectTimer()},onEnterWaitSocketClosed:function(){i.startDisconnectTimer()},onLeaveWaitSocketClosed:function(){i.cancelDisconnectTimer()},onEnterWaitOffloadSocketClosed:function(){i.startDisconnectTimer()},onLeaveWaitOffloadSocketClosed:function(){i.cancelDisconnectTimer()},onDisconnected:function(){i.resetBackoff(),i.finalizeSocket()},onReceiveClose:function(){i.onCloseReceived()},onReceiveOffload:function(t,e){bd.debug("onreceiveoffload: ",e),i.modifyBackoff(e.body),i.onCloseReceived()},onUnsupported:function(){i.closeSocket(!0),i.finalizeSocket()},onError:function(t,e){i.closeSocket(e),i.finalizeSocket()},onEnterState:function(t){"none"!==t.from&&i.changeState(t)},onInvalidTransition:function(t,e,n){bd.warn("FSM: unexpected transition",e,n)}}});return i.fsm=new a,i}return yr(o,[{key:"changeState",value:function(t){bd.debug("FSM: ".concat(t.transition,": ").concat(t.from," --\x3e ").concat(t.to)),this.lastEmittedState!==this.state&&(this.lastEmittedState=this.state,this.emit("stateChanged",this.state))}},{key:"resetBackoff",value:function(){bd.trace("resetBackoff"),this.retrier.stop()}},{key:"modifyBackoff",value:function(t){bd.trace("modifyBackoff",t);var e=t?t.backoff_policy:null;e&&"number"==typeof e.reconnect_min_ms&&this.retrier.modifyBackoff(e.reconnect_min_ms)}},{key:"startDisconnectTimer",value:function(){var t=this;bd.trace("startDisconnectTimer"),this.disconnectingTimer&&(clearTimeout(this.disconnectingTimer),this.disconnectingTimer=null),this.disconnectingTimer=setTimeout((function(){bd.debug("disconnecting is timed out"),t.closeSocket(!0)}),3e3)}},{key:"cancelDisconnectTimer",value:function(){bd.trace("cancelDisconnectTimer"),this.disconnectingTimer&&(clearTimeout(this.disconnectingTimer),this.disconnectingTimer=null)}},{key:"isConnected",get:function(){return"connected"===this.state&&this.websocket.isConnected}},{key:"state",get:function(){switch(this.fsm.state){case"connecting":case"initialising":case"retrying":case"error":return"connecting";case"updating":case"connected":return"connected";case"rejected":return"denied";case"disconnecting":case"waitSocketClosed":case"waitOffloadSocketClosed":return"disconnecting";case"disconnected":default:return"disconnected"}}},{key:"initRetry",value:function(){bd.debug("initRetry"),this.retrier.inProgress?this.retrier.attemptFailed():this.retrier.start()}},{key:"retry",value:function(){"connecting"!=this.fsm.state?(bd.trace("retry"),this.websocket.close(),this.fsm.userRetry()):bd.trace("can\t retry as already connecting")}},{key:"onConnected",value:function(){this.emit("connected")}},{key:"finalizeSocket",value:function(){bd.trace("finalizeSocket"),this.websocket.close(),this.emit("disconnected"),this.disconnectedPromiseResolve&&(this.disconnectedPromiseResolve(),this.disconnectedPromiseResolve=null)}},{key:"setupSocket",value:function(){bd.trace("setupSocket:",this.config.token),this.emit("beforeConnect"),this.websocket.connect()}},{key:"onIncomingMessage",value:function(t){var e=Pk.parse(t);if(e){var n=e.method,r=e.header,o=e.payload;if("reply"!==n&&this.confirmReceiving(r),"notification"===n)this.emit("message",r.message_type,o);else if("reply"===r.method)this.transport.processReply({id:r.id,status:r.status,header:r,body:o});else if("client_update"===r.method)"token_about_to_expire"===r.client_update_type&&this.emit("tokenAboutToExpire");else if("close"===r.method)if(308===r.status.code)bd.debug("Connection has been offloaded"),this.fsm.receiveOffload({status:r.status.status,body:o});else if(406===r.status.code){var i="Server closed connection because can't parse protocol: ".concat(JSON.stringify(r.status));this.emitReplyConnectionError(i,r,!0),bd.error(i),this.fsm.receiveFatalClose()}else 417===r.status.code?(bd.error("Server closed connection because can't parse client reply: ".concat(JSON.stringify(r.status))),this.fsm.receiveFatalClose(r.status.status)):410===r.status.code?(bd.warn("Server closed connection: ".concat(JSON.stringify(r.status))),this.fsm.receiveClose(r.status.status),this.emit("tokenExpired")):401===r.status.code?(bd.error("Server closed connection: ".concat(JSON.stringify(r.status))),this.fsm.receiveClose(r.status.status)):(bd.warn("unexpected message: ",r.status),this.fsm.receiveOffload({status:r.status.status,body:null}))}}},{key:"sendInit",value:(n=dr(no.mark((function t(){var e,n;return no.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return bd.trace("sendInit"),t.prev=1,this.emit("beforeSendInit"),t.next=5,this.transport.sendInit();case 5:e=t.sent,this.config.updateContinuationToken(e.continuationToken),this.config.confirmedCapabilities=e.confirmedCapabilities,this.fsm.initSuccess(e),this.emit("initialized",e),this.emit("tokenUpdated"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),t.t0 instanceof Bk?(n=!1,bd.warn("Init rejected by server: ".concat(JSON.stringify(t.t0.reply.status))),this.emit("sendInitFailed"),401===t.t0.reply.status.code||403===t.t0.reply.status.code?(n=!0,this.fsm.tokenRejected(t.t0.reply.status),t.t0.reply.status.errorCode===this.tokenExpiredSasCode&&this.emit("tokenExpired")):429===t.t0.reply.status.code?(this.modifyBackoff(t.t0.reply.body),this.fsm.initError(!0)):500===t.t0.reply.status.code?this.fsm.initError(!1):this.fsm.initError(!0),this.emitReplyConnectionError(t.t0.message,t.t0.reply,n)):(this.terminationReason=t.t0.message,this.emit("connectionError",{terminal:!0,message:"Unknown error during connection initialisation: ".concat(t.t0.message,"\n").concat(JSON.stringify(t.t0,null,2)),httpStatusCode:null,errorCode:null}),this.fsm.initError(!0)),this.emit("tokenUpdated",t.t0);case 17:case"end":return t.stop()}}),t,this,[[1,13]])}))),function(){return n.apply(this,arguments)})},{key:"sendUpdate",value:(e=dr(no.mark((function t(){var e,n,r;return no.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return bd.trace("sendUpdate"),e=new Dv(this.config.token),t.prev=2,t.next=5,this.transport.sendWithReply(e);case 5:n=t.sent,this.fsm.updateSuccess(n.body),this.emit("tokenUpdated"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),t.t0 instanceof Bk?(r=!1,bd.warn("Token update rejected by server: ".concat(JSON.stringify(t.t0.reply.status))),401===t.t0.reply.status.code||403===t.t0.reply.status.code?(r=!0,this.fsm.tokenRejected(t.t0.reply.status),t.t0.reply.status.errorCode===this.tokenExpiredSasCode&&this.emit("tokenExpired")):429===t.t0.reply.status.code?(this.modifyBackoff(t.t0.reply.body),this.fsm.updateError(t.t0.reply.status)):this.fsm.updateError(t.t0.reply.status),this.emitReplyConnectionError(t.t0.message,t.t0.reply,r)):(this.emit("error",!1,t.t0.message,null,null),this.fsm.updateError(t.t0)),this.emit("tokenUpdated",t.t0);case 14:case"end":return t.stop()}}),t,this,[[2,10]])}))),function(){return e.apply(this,arguments)})},{key:"emitReplyConnectionError",value:function(t,e,n){var r=e.status&&e.status.description?e.status.description:t,o=e.status.code,i=e.status&&e.status.errorCode?e.status.errorCode:null;n&&(this.terminationReason=r),this.emit("connectionError",{terminal:n,message:"Connection error: ".concat(r),httpStatusCode:o,errorCode:i})}},{key:"cancelInit",value:function(){bd.trace("cancelInit")}},{key:"cancelUpdate",value:function(){bd.trace("cancelUpdate")}},{key:"confirmReceiving",value:function(t){bd.trace("confirmReceiving");try{this.transport.send(new Wv(t.id))}catch(t){bd.debug("failed to confirm packet receiving",t)}}},{key:"closeSocket",value:function(t){var e=this;bd.trace("closeSocket (graceful: ".concat(t,")")),t&&this.transport.isConnected&&this.transport.sendClose(),this.websocket.close(),setTimeout((function(){return e.fsm.socketClosed()}),0)}},{key:"connect",value:function(){bd.trace("connect"),this.fsm.userConnect()}},{key:"disconnect",value:function(){var t=this;return bd.trace("disconnect"),this.fsm.is("disconnected")?Promise.resolve():new Promise((function(e){t.disconnectedPromiseResolve=e,t.fsm.userDisconnect()}))}},{key:"updateToken",value:function(t){var e=this;return bd.trace("updateToken:",t),new Promise((function(t,n){e.once("tokenUpdated",(function(e){e?n(e):t()})),e.fsm.userUpdateToken()}))}},{key:"isTerminalState",get:function(){return-1!==this.terminalStates.indexOf(this.fsm.state)}},{key:"getTerminationReason",get:function(){return this.terminationReason}},{key:"onCloseReceived",value:function(){this.websocket.close()}}]),o}(Oi);qd("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),sv);var qS={exports:{}};!function(t,e){(function(){var r={function:!0,object:!0}["undefined"==typeof window?"undefined":kr(window)]&&window||this,o=e,i=t&&!t.nodeType&&t,a=o&&i&&"object"==kr(n)&&n;!a||a.global!==a&&a.window!==a&&a.self!==a||(r=a);var s=Math.pow(2,53)-1,c=/\bOpera/,u=Object.prototype,f=u.hasOwnProperty,l=u.toString;function h(t){return(t=String(t)).charAt(0).toUpperCase()+t.slice(1)}function p(t){return t=m(t),/^(?:webOS|i(?:OS|P))/.test(t)?t:h(t)}function d(t,e){for(var n in t)f.call(t,n)&&e(t[n],n,t)}function v(t){return null==t?h(t):l.call(t).slice(8,-1)}function y(t){return String(t).replace(/([ -])(?!$)/g,"$1?")}function g(t,e){var n=null;return function(t,e){var n=-1,r=t?t.length:0;if("number"==typeof r&&r>-1&&r<=s)for(;++n<r;)e(t[n],n,t);else d(t,e)}(t,(function(r,o){n=e(n,r,o,t)})),n}function m(t){return String(t).replace(/^ +| +$/g,"")}var b=function t(e){var n=r,o=e&&"object"==kr(e)&&"String"!=v(e);o&&(n=e,e=null);var i=n.navigator||{},a=i.userAgent||"";e||(e=a);var s,u,f=o?!!i.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(l.toString()),h="Object",b=o?h:"ScriptBridgingProxyObject",w=o?h:"Environment",x=o&&n.java?"JavaPackage":v(n.java),k=o?h:"RuntimeObject",S=/\bJava/.test(x)&&n.java,T=S&&v(n.environment)==w,E=S?"a":"α",O=S?"b":"β",A=n.document||{},R=n.operamini||n.opera,_=c.test(_=o&&R?R["[[Class]]"]:v(R))?_:R=null,C=e,P=[],I=null,j=e==a,M=j&&R&&"function"==typeof R.version&&R.version(),L=g([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(t,n){return t||RegExp("\\b"+(n.pattern||y(n))+"\\b","i").exec(e)&&(n.label||n)})),N=function(t){return g(t,(function(t,n){return t||RegExp("\\b"+(n.pattern||y(n))+"\\b","i").exec(e)&&(n.label||n)}))}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),D=U([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),B=function(t){return g(t,(function(t,n,r){return t||(n[D]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(D)]||RegExp("\\b"+y(r)+"(?:\\b|\\w*\\d)","i").exec(e))&&r}))}({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),F=function(t){return g(t,(function(t,n){var r=n.pattern||y(n);return!t&&(t=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=function(t,e,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return e&&n&&/^Win/i.test(t)&&!/^Windows Phone /i.test(t)&&(r=r[/[\d.]+$/.exec(t)])&&(t="Windows "+r),t=String(t),e&&n&&(t=t.replace(RegExp(e,"i"),n)),p(t.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(t,r,n.label||n)),t}))}(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function U(t){return g(t,(function(t,n){var r=n.pattern||y(n);return!t&&(t=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=p(t[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t}))}function W(t){return g(t,(function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null}))}if(L&&(L=[L]),/\bAndroid\b/.test(F)&&!D&&(s=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(e))&&(D=m(s[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),B&&!D?D=U([B]):B&&D&&(D=D.replace(RegExp("^("+y(B)+")[-_.\\s]","i"),B+" ").replace(RegExp("^("+y(B)+")[-_.]?(\\w)","i"),B+" $2")),(s=/\bGoogle TV\b/.exec(D))&&(D=s[0]),/\bSimulator\b/i.test(e)&&(D=(D?D+" ":"")+"Simulator"),"Opera Mini"==N&&/\bOPiOS\b/.test(e)&&P.push("running in Turbo/Uncompressed mode"),"IE"==N&&/\blike iPhone OS\b/.test(e)?(B=(s=t(e.replace(/like iPhone OS/,""))).manufacturer,D=s.product):/^iP/.test(D)?(N||(N="Safari"),F="iOS"+((s=/ OS ([\d_]+)/i.exec(e))?" "+s[1].replace(/_/g,"."):"")):"Konqueror"==N&&/^Linux\b/i.test(F)?F="Kubuntu":B&&"Google"!=B&&(/Chrome/.test(N)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(D))||/\bAndroid\b/.test(F)&&/^Chrome/.test(N)&&/\bVersion\//i.test(e)?(N="Android Browser",F=/\bAndroid\b/.test(F)?F:"Android"):"Silk"==N?(/\bMobi/i.test(e)||(F="Android",P.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&P.unshift("accelerated")):"UC Browser"==N&&/\bUCWEB\b/.test(e)?P.push("speed mode"):"PaleMoon"==N&&(s=/\bFirefox\/([\d.]+)\b/.exec(e))?P.push("identifying as Firefox "+s[1]):"Firefox"==N&&(s=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(F||(F="Firefox OS"),D||(D=s[1])):!N||(s=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(N))?(N&&!D&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(s+"/")+8))&&(N=null),(s=D||B||F)&&(D||B||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(F))&&(N=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(F)?F:s)+" Browser")):"Electron"==N&&(s=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&P.push("Chromium "+s),M||(M=W(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",y(N),"(?:Firefox|Minefield|NetFront)"])),(s=("iCab"==L&&parseFloat(M)>3?"WebKit":/\bOpera\b/.test(N)&&(/\bOPR\b/.test(e)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(L)&&"WebKit"||!L&&/\bMSIE\b/i.test(e)&&("Mac OS"==F?"Tasman":"Trident")||"WebKit"==L&&/\bPlayStation\b(?! Vita\b)/i.test(N)&&"NetFront")&&(L=[s]),"IE"==N&&(s=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(N+=" Mobile",F="Windows Phone "+(/\+$/.test(s)?s:s+".x"),P.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(N="IE Mobile",F="Windows Phone 8.x",P.unshift("desktop mode"),M||(M=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=N&&"Trident"==L&&(s=/\brv:([\d.]+)/.exec(e))&&(N&&P.push("identifying as "+N+(M?" "+M:"")),N="IE",M=s[1]),j){if(function(t,e){var n=null!=t?kr(t[e]):"number";return!(/^(?:boolean|number|string|undefined)$/.test(n)||"object"==n&&!t[e])}(n,"global"))if(S&&(C=(s=S.lang.System).getProperty("os.arch"),F=F||s.getProperty("os.name")+" "+s.getProperty("os.version")),T){try{M=n.require("ringo/engine").version.join("."),N="RingoJS"}catch(t){(s=n.system)&&s.global.system==n.system&&(N="Narwhal",F||(F=s[0].os||null))}N||(N="Rhino")}else"object"==kr(n.process)&&!n.process.browser&&(s=n.process)&&("object"==kr(s.versions)&&("string"==typeof s.versions.electron?(P.push("Node "+s.versions.node),N="Electron",M=s.versions.electron):"string"==typeof s.versions.nw&&(P.push("Chromium "+M,"Node "+s.versions.node),N="NW.js",M=s.versions.nw)),N||(N="Node.js",C=s.arch,F=s.platform,M=(M=/[\d.]+/.exec(s.version))?M[0]:null));else v(s=n.runtime)==b?(N="Adobe AIR",F=s.flash.system.Capabilities.os):v(s=n.phantom)==k?(N="PhantomJS",M=(s=s.version||null)&&s.major+"."+s.minor+"."+s.patch):"number"==typeof A.documentMode&&(s=/\bTrident\/(\d+)/i.exec(e))?(M=[M,A.documentMode],(s=+s[1]+4)!=M[1]&&(P.push("IE "+M[1]+" mode"),L&&(L[1]=""),M[1]=s),M="IE"==N?String(M[1].toFixed(1)):M[0]):"number"==typeof A.documentMode&&/^(?:Chrome|Firefox)\b/.test(N)&&(P.push("masking as "+N+" "+M),N="IE",M="11.0",L=["Trident"],F="Windows");F=F&&p(F)}if(M&&(s=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(M)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(j&&i.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(I=/b/i.test(s)?"beta":"alpha",M=M.replace(RegExp(s+"\\+?$"),"")+("beta"==I?O:E)+(/\d+\+?/.exec(s)||"")),"Fennec"==N||"Firefox"==N&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(F))N="Firefox Mobile";else if("Maxthon"==N&&M)M=M.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(D))"Xbox 360"==D&&(F=null),"Xbox 360"==D&&/\bIEMobile\b/.test(e)&&P.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(N)&&(!N||D||/Browser|Mobi/.test(N))||"Windows CE"!=F&&!/Mobi/i.test(e))if("IE"==N&&j)try{null===n.external&&P.unshift("platform preview")}catch(t){P.unshift("embedded")}else(/\bBlackBerry\b/.test(D)||/\bBB10\b/.test(e))&&(s=(RegExp(D.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||M)?(F=((s=[s,/BB10/.test(e)])[1]?(D=null,B="BlackBerry"):"Device Software")+" "+s[0],M=null):this!=d&&"Wii"!=D&&(j&&R||/Opera/.test(N)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==N&&/\bOS X (?:\d+\.){2,}/.test(F)||"IE"==N&&(F&&!/^Win/.test(F)&&M>5.5||/\bWindows XP\b/.test(F)&&M>8||8==M&&!/\bTrident\b/.test(e)))&&!c.test(s=t.call(d,e.replace(c,"")+";"))&&s.name&&(s="ing as "+s.name+((s=s.version)?" "+s:""),c.test(N)?(/\bIE\b/.test(s)&&"Mac OS"==F&&(F=null),s="identify"+s):(s="mask"+s,N=_?p(_.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(s)&&(F=null),j||(M=null)),L=["Presto"],P.push(s));else N+=" Mobile";(s=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(s=[parseFloat(s.replace(/\.(\d)$/,".0$1")),s],"Safari"==N&&"+"==s[1].slice(-1)?(N="WebKit Nightly",I="alpha",M=s[1].slice(0,-1)):M!=s[1]&&M!=(s[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(M=null),s[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(e)||0)[1],537.36==s[0]&&537.36==s[2]&&parseFloat(s[1])>=28&&"WebKit"==L&&(L=["Blink"]),j&&(f||s[1])?(L&&(L[1]="like Chrome"),s=s[1]||((s=s[0])<530?1:s<532?2:s<532.05?3:s<533?4:s<534.03?5:s<534.07?6:s<534.1?7:s<534.13?8:s<534.16?9:s<534.24?10:s<534.3?11:s<535.01?12:s<535.02?"13+":s<535.07?15:s<535.11?16:s<535.19?17:s<536.05?18:s<536.1?19:s<537.01?20:s<537.11?"21+":s<537.13?23:s<537.18?24:s<537.24?25:s<537.36?26:"Blink"!=L?"27":"28")):(L&&(L[1]="like Safari"),s=(s=s[0])<400?1:s<500?2:s<526?3:s<533?4:s<534?"4+":s<535?5:s<537?6:s<538?7:s<601?8:s<602?9:s<604?10:s<606?11:s<608?12:"12"),L&&(L[1]+=" "+(s+="number"==typeof s?".x":/[.+]/.test(s)?"":"+")),"Safari"==N&&(!M||parseInt(M)>45)?M=s:"Chrome"==N&&/\bHeadlessChrome/i.test(e)&&P.unshift("headless")),"Opera"==N&&(s=/\bzbov|zvav$/.exec(F))?(N+=" ",P.unshift("desktop mode"),"zvav"==s?(N+="Mini",M=null):N+="Mobile",F=F.replace(RegExp(" *"+s+"$"),"")):"Safari"==N&&/\bChrome\b/.exec(L&&L[1])?(P.unshift("desktop mode"),N="Chrome Mobile",M=null,/\bOS X\b/.test(F)?(B="Apple",F="iOS 4.3+"):F=null):/\bSRWare Iron\b/.test(N)&&!M&&(M=W("Chrome")),M&&0==M.indexOf(s=/[\d.]+$/.exec(F))&&e.indexOf("/"+s+"-")>-1&&(F=m(F.replace(s,""))),F&&-1!=F.indexOf(N)&&!RegExp(N+" OS").test(F)&&(F=F.replace(RegExp(" *"+y(N)+" *"),"")),L&&!/\b(?:Avant|Nook)\b/.test(N)&&(/Browser|Lunascape|Maxthon/.test(N)||"Safari"!=N&&/^iOS/.test(F)&&/\bSafari\b/.test(L[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(N)&&L[1])&&(s=L[L.length-1])&&P.push(s),P.length&&(P=["("+P.join("; ")+")"]),B&&D&&D.indexOf(B)<0&&P.push("on "+B),D&&P.push((/^on /.test(P[P.length-1])?"":"on ")+D),F&&(s=/ ([\d.+]+)$/.exec(F),u=s&&"/"==F.charAt(F.length-s[0].length-1),F={architecture:32,family:s&&!u?F.replace(s[0],""):F,version:s?s[1]:null,toString:function(){var t=this.version;return this.family+(t&&!u?" "+t:"")+(64==this.architecture?" 64-bit":"")}}),(s=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(C))&&!/\bi686\b/i.test(C)?(F&&(F.architecture=64,F.family=F.family.replace(RegExp(" *"+s),"")),N&&(/\bWOW64\b/i.test(e)||j&&/\w(?:86|32)$/.test(i.cpuClass||i.platform)&&!/\bWin64; x64\b/i.test(e))&&P.unshift("32-bit")):F&&/^OS X/.test(F.family)&&"Chrome"==N&&parseFloat(M)>=39&&(F.architecture=64),e||(e=null);var z={};return z.description=e,z.layout=L&&L[0],z.manufacturer=B,z.name=N,z.prerelease=I,z.product=D,z.ua=e,z.version=N&&M,z.os=F||{architecture:null,family:null,version:null,toString:function(){return"null"}},z.parse=t,z.toString=function(){return this.description||""},z.version&&P.unshift(M),z.name&&P.unshift(N),F&&N&&(F!=String(F).split(" ")[0]||F!=N.split(" ")[0]&&!D)&&P.push(D?"("+F+")":"on "+F),P.length&&(z.description=P.join(" ")),z}();o&&i?d(b,(function(t,e){o[e]=t})):r.platform=b}).call(n)}(qS,qS.exports);var XS=function(){function t(){Tr(this,t)}return yr(t,null,[{key:"getMetadata",value:function(t){var e,n,r,o,i,a,s,c,u=t&&t.clientMetadata?t.clientMetadata:{},f={env:null!==(e=qS.exports.name)&&void 0!==e?e:"unknown",envv:null!==(n=qS.exports.version)&&void 0!==n?n:"unknown",os:null!==(r=null===(o=qS.exports.os)||void 0===o?void 0:o.family)&&void 0!==r?r:"unknown",osv:null!==(i=null===(a=qS.exports.os)||void 0===a?void 0:a.version)&&void 0!==i?i:"unknown",osa:null!==(s=null===(c=qS.exports.os)||void 0===c?void 0:c.architecture)&&void 0!==s?s:"unknown",sdk:"js-default"},l={};return["ver","env","envv","os","osv","osa","type","sdk","sdkv","dev","devv","devt","app","appv"].filter((function(t){return t in u||t in f})).forEach((function(t){return l[t]=t in u?u[t]:f[t]})),l}}]),t}();var JS=function(){function t(e,n){var r=this;Tr(this,t),this.config=n,this.activeRequests=new Map,this.channel=e,this.channel.on("reply",(function(t){return r.processReply(t)})),this.channel.on("disconnected",(function(){r.activeRequests.forEach((function(t){clearTimeout(t.timeout),t.reject(new Nk("disconnected"))})),r.activeRequests.clear()}))}var e;return yr(t,[{key:"isConnected",get:function(){return this.channel.isConnected}},{key:"processReply",value:function(t){var e,n=this.activeRequests.get(t.id);n&&(clearTimeout(n.timeout),this.activeRequests.delete(t.id),(e=t.status.code)>=200&&e<300?n.resolve(t):(n.reject(new Bk("Transport failure: "+t.status.status,t)),bd.trace("message rejected")))}},{key:"storeRequest",value:function(t,e,n){var r={resolve:e,reject:n,timeout:setTimeout((function(){bd.trace("request",t,"is timed out"),n(new Nk("Twilsock: request timeout: "+t))}),3e4)};this.activeRequests.set(t,r)}},{key:"shutdown",value:function(){this.activeRequests.forEach((function(t){clearTimeout(t.timeout),t.reject(new Nk("Twilsock: request cancelled by user"))})),this.activeRequests.clear()}},{key:"sendInit",value:(e=dr(no.mark((function t(){var e,n,r;return no.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return bd.trace("sendInit"),e=XS.getMetadata(this.config),n=new jv(this.config.token,this.config.continuationToken,e,this.config.initRegistrations,this.config.tweaks),t.next=5,this.sendWithReply(n);case 5:return r=t.sent,t.abrupt("return",new Lv(r.id,r.header.continuation_token,new Set(r.header.capabilities),r.header.continuation_token_status,r.header.offline_storage,r.header.init_registrations,r.header.debug_info));case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"sendClose",value:function(){var t=new Gv;this.send(t)}},{key:"sendWithReply",value:function(t,e){var n=this;return new Promise((function(r,o){var i=n.send(t,e);n.storeRequest(i,r,o)}))}},{key:"send",value:function(t,e){t.id=t.id||"TM".concat(Cv.v4());var n=Pk.createPacket(t,function(t){switch(kr(t)){case"undefined":return"";case"object":return JSON.stringify(t);default:return t}}(e));try{return this.channel.send(n),t.id}catch(e){throw bd.debug("failed to send ",t,e),bd.trace(e.stack),e}}}]),t}();function HS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mr(t);if(e){var o=mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Sr(this,n)}}var ZS=function(t){xr(r,t);var n=HS(r);function r(t){var o;return Tr(this,r),Er(gr(o=n.call(this)),"socket",null),o.url=t,o.url=t,o.WebSocket=e.WebSocket||e.MozWebSocket||{},o}return yr(r,[{key:"isConnected",get:function(){return!!this.socket&&1===this.socket.readyState}},{key:"connect",value:function(){var t,e=this;bd.trace("connecting to socket");try{t=new this.WebSocket(this.url)}catch(t){return bd.debug("Socket error: ".concat(this.url)),void this.emit("socketError",t)}t.binaryType="arraybuffer",t.onopen=function(){bd.debug("socket opened ".concat(e.url)),e.emit("connected")},t.onclose=function(t){bd.debug("socket closed",t),e.emit("disconnected",t)},t.onerror=function(t){bd.debug("Socket error:",t),e.emit("socketError",t)},t.onmessage=function(t){e.emit("message",t.data)},this.socket=t}},{key:"send",value:function(t){return this.socket&&this.socket.send(t)}},{key:"close",value:function(){if(bd.trace("closing socket"),this.socket){this.socket.onopen=null,this.socket.onclose=null,this.socket.onerror=null,this.socket.onmessage=null;try{this.socket.close()}finally{}}}}]),r}(Oi);function QS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mr(t);if(e){var o=mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Sr(this,n)}}var tT=function(t){xr(c,t);var e,n,r,o,i,a,s=QS(c);function c(t){var e;return Tr(this,c),(e=s.call(this)).transport=t,e.registrations=new Map,e.registrationsInProgress=new Map,e}return yr(c,[{key:"putNotificationContext",value:(a=dr(no.mark((function t(e,n){var r;return no.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={method:"put_notification_ctx",notification_ctx_id:e},t.next=3,this.transport.sendWithReply(r,n);case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return a.apply(this,arguments)})},{key:"deleteNotificationContext",value:(i=dr(no.mark((function t(e){var n;return no.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={method:"delete_notification_ctx",notification_ctx_id:e},t.next=3,this.transport.sendWithReply(n);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"updateRegistration",value:(o=dr(no.mark((function t(e,n){var r,o;return no.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return bd.debug("update registration for context",e),(r=this.registrationsInProgress.get(e))||(r=new Set,this.registrationsInProgress.set(e,r)),o=Cv.v4(),r.add(o),t.prev=5,t.next=8,this.putNotificationContext(e,n);case 8:bd.debug("registration attempt succeeded for context",n),r.delete(o),0===r.size&&(this.registrationsInProgress.delete(e),this.emit("registered",e)),t.next=19;break;case 13:t.prev=13,t.t0=t.catch(5),bd.warn("registration attempt failed for context",n),bd.debug(t.t0),r.delete(o),0===r.size&&(this.registrationsInProgress.delete(e),this.emit("registrationFailed",e,t.t0));case 19:case"end":return t.stop()}}),t,this,[[5,13]])}))),function(t,e){return o.apply(this,arguments)})},{key:"updateRegistrations",value:(r=dr(no.mark((function t(){var e,n=this;return no.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return bd.trace("refreshing ".concat(this.registrations.size," registrations")),e=[],this.registrations.forEach((function(t,r){e.push(n.updateRegistration(r,t))})),t.next=5,Promise.all(e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"setNotificationsContext",value:(n=dr(no.mark((function t(e,n){return no.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&n){t.next=2;break}throw new Nk("Invalid arguments provided");case 2:return this.registrations.set(e,n),t.next=5,this.updateRegistration(e,n);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return n.apply(this,arguments)})},{key:"removeNotificationsContext",value:(e=dr(no.mark((function t(e){return no.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.registrations.has(e)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.deleteNotificationContext(e);case 4:this.transport.isConnected&&this.registrations.delete(e);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),c}(Oi),eT=Bt,nT=De,rT=qo,oT=w,iT=Ry,aT=Ny;Oy("match",(function(t,e,n){return[function(e){var n=oT(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](rT(n))},function(t){var r=eT(this),o=rT(t),i=n(e,r,o);if(i.done)return i.value;if(!r.global)return aT(r,o);var a=r.unicode;r.lastIndex=0;for(var s,c=[],u=0;null!==(s=aT(r,o));){var f=rT(s[0]);c[u]=f,""===f&&(r.lastIndex=iT(o,nT(r.lastIndex),a)),u++}return 0===u?null:c}]}));var sT=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e},cT=Bt,uT=w,fT=sT,lT=qo,hT=Ny;Oy("search",(function(t,e,n){return[function(e){var n=uT(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](lT(n))},function(t){var r=cT(this),o=lT(t),i=n(e,r,o);if(i.done)return i.value;var a=r.lastIndex;fT(a,0)||(r.lastIndex=0);var s=hT(r,o);return fT(r.lastIndex,a)||(r.lastIndex=a),null===s?-1:s.index}]}));var pT=Rn,dT=We,vT=Me,yT=De,gT=H,mT=po,bT=co,wT=mo("splice"),xT=Math.max,kT=Math.min,ST=9007199254740991,TT="Maximum allowed length exceeded";function ET(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mr(t);if(e){var o=mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Sr(this,n)}}pT({target:"Array",proto:!0,forced:!wT},{splice:function(t,e){var n,r,o,i,a,s,c=gT(this),u=yT(c.length),f=dT(t,u),l=arguments.length;if(0===l?n=r=0:1===l?(n=0,r=u-f):(n=l-2,r=kT(xT(vT(e),0),u-f)),u+n-r>ST)throw TypeError(TT);for(o=mT(c,r),i=0;i<r;i++)(a=f+i)in c&&bT(o,i,c[a]);if(o.length=r,n<r){for(i=f;i<u-r;i++)s=i+n,(a=i+r)in c?c[s]=c[a]:delete c[s];for(i=u;i>u-r+n;i--)delete c[i-1]}else if(n>r)for(i=u-r;i>f;i--)s=i+n-1,(a=i+r-1)in c?c[s]=c[a]:delete c[s];for(i=0;i<n;i++)c[i+f]=arguments[i+2];return c.length=u-r+n,o}});var OT=function(t){xr(n,t);var e=ET(n);function n(t,r,o){var i;return Tr(this,n),(i=e.call(this,r)).status=t,i.description=r,i.body=o,i}return n}(Nk);function AT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mr(t);if(e){var o=mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Sr(this,n)}}var RT=function(t){xr(n,t);var e=AT(n);function n(t){return Tr(this,n),e.call(this,t)}return n}(Nk);function _T(t,e){var n=function(t){var e=t.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)(\/[^?#]*)(\?[^#]*|)(#.*|)$/);if(e){var n={protocol:e[1],host:e[2],hostname:e[3],port:e[4],pathname:e[5],search:e[6],hash:e[7],params:{}};if(n.search.length>0){var r=n.search.substring(1);n.params=r.split("&").map((function(t){return t.split("=")})).reduce((function(t,e){return t.hasOwnProperty(e[0])?Array.isArray(t[e[0]])?t[e[0]].push(e[1]):t[e[0]]=[t[e[0]],e[1]]:t[e[0]]=e[1],t}),{})}return n}throw new Nk("Incorrect URI: "+t)}(e),r={method:t,host:n.host,path:n.pathname};return n.params&&(r.params=n.params),r}function CT(t,e,n,r,o){return{to:_T(t,e),headers:n,body:r,grant:o}}var PT=function(){function t(e,n,r){Tr(this,t),this.config=r,this.transport=e,this.pendingMessages=[],this.twilsock=n}var e;return yr(t,[{key:"saveMessage",value:function(t){var e=this;return new Promise((function(n,r){var o={message:t,resolve:n,reject:r,alreadyRejected:!1,timeout:setTimeout((function(){bd.debug("request is timed out"),r(new Nk("request '".concat(t.to.method,"' to '").concat(t.to.host,"' timed out"))),o.alreadyRejected=!0}),2e4)};e.pendingMessages.push(o)}))}},{key:"sendPendingMessages",value:function(){for(var t=this,e=function(){var e=t.pendingMessages[0];if(!e.alreadyRejected)try{var n=e.message;t.actualSend(n).then((function(t){return e.resolve(t)})).catch((function(t){return e.reject(t)})),clearTimeout(e.timeout)}catch(t){return bd.debug("Failed to send pending message",t),"break"}t.pendingMessages.splice(0,1)};this.pendingMessages.length>0;){if("break"===e())break}}},{key:"rejectPendingMessages",value:function(){var t=this;this.pendingMessages.forEach((function(e){e.reject(new RT("Unable to connect: "+t.twilsock.getTerminationReason)),e.alreadyRejected=!0,clearTimeout(e.timeout)})),this.pendingMessages.splice(0,this.pendingMessages.length)}},{key:"actualSend",value:(e=dr(no.mark((function t(e){var n,r,o,i,a,s,c,u;return no.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.to,o=e.headers,i=e.body,a=null!==(n=e.grant)&&void 0!==n?n:this.config.activeGrant,s={host:r.host,path:r.path,method:r.method,params:r.params,headers:o},c=new Fv(a,o["Content-Type"]||"application/json",s),bd.trace("Sending upstream message",c),t.next=9,this.transport.sendWithReply(c,i);case 9:if(u=t.sent,bd.trace("Received upstream message response",u),!((l=u)&&l.header&&l.header.http_status)||(f=u.header.http_status.code)>=200&&f<300){t.next=13;break}throw new OT(u.header.http_status.code,u.header.http_status.status,u.body);case 13:return t.abrupt("return",{status:u.header.http_status,headers:u.header.http_headers,body:u.body});case 14:case"end":return t.stop()}var f,l}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"send",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if(this.twilsock.isTerminalState)return Promise.reject(new RT("Unable to connect: "+this.twilsock.getTerminationReason));var i=CT(t,e,n,r,o);return this.twilsock.isConnected?this.actualSend(i):this.saveMessage(i)}}]),t}(),IT=function(){function t(){var e=this;Tr(this,t),this._promise=new Promise((function(t,n){e._resolve=t,e._reject=n}))}return yr(t,[{key:"promise",get:function(){return this._promise}},{key:"update",value:function(t){this._resolve(t)}},{key:"set",value:function(t){this._resolve(t)}},{key:"fail",value:function(t){this._reject(t)}}]),t}(),jT=function(){function t(e){Tr(this,t),this.id=e}return yr(t,null,[{key:"create",value:function(e){if(e instanceof Object&&"storage_id"in e)return new t(e.storage_id);throw new Nk('Field "storage_id" is missing')}}]),t}(),MT=function(){function t(){return Tr(this,t),Er(this,"initializedFlag","twilio_twilsock_token_storage"),Er(this,"tokenStoragePrefix","twilio_continuation_token_"),t._instance||(this.initialize(),t._instance=this),t._instance}return yr(t,[{key:"sessionStorage",value:function(){try{return e.sessionStorage}catch(t){return null}}},{key:"window",value:function(){try{return e.window}catch(t){return null}}},{key:"storeToken",value:function(t,e){this.canStore()&&this.sessionStorage.setItem(this.getKeyName(e),t)}},{key:"getStoredToken",value:function(t){return this.canStore()?this.sessionStorage.getItem(this.getKeyName(t)):null}},{key:"initialize",value:function(){var t=this;if(this.canStore()){this.sessionStorage.getItem(this.initializedFlag)&&this.clear(),this.sessionStorage.setItem(this.initializedFlag,"true");var e=this.sessionStorage.removeItem;this.window.addEventListener("unload",(function(){e(t.initializedFlag)}))}}},{key:"clear",value:function(){if(this.canStore()){for(var t=[],e=0;e<this.sessionStorage.length;e++){var n=this.sessionStorage.key(e);n&&0===n.indexOf(this.tokenStoragePrefix)&&t.push(n)}var r=this.sessionStorage.removeItem;t.forEach((function(t){return r(t)})),r(this.initializedFlag)}}},{key:"getKeyName",value:function(t){return"".concat(this.tokenStoragePrefix).concat(t)}},{key:"canStore",value:function(){return!!(this.sessionStorage&&this.sessionStorage.length&&this.window)}}]),t}();Er(MT,"_instance",null);var LT,NT,DT=new MT,BT=function(){function t(e,n,r,o,i,a){Tr(this,t),this.title=e,this.details=n,this.start=r,this.type=i,this.id=a,this.end=o}return yr(t,[{key:"toTelemetryEvent",value:function(){var t=new Date,e=this.start,n=this.end?this.end:t;if(n<e){var r=n;n=e,e=r}var o=e.getTime()-t.getTime(),i=n.getTime()-t.getTime();return new Vv(o,i,this.title,this.details,this.id,this.type)}}]),t}();t.TelemetryPoint=void 0,(LT=t.TelemetryPoint||(t.TelemetryPoint={}))[LT.Start=0]="Start",LT[LT.End=1]="End",t.EventSendingLimitation=void 0,(NT=t.EventSendingLimitation||(t.EventSendingLimitation={}))[NT.MinEventsPortion=0]="MinEventsPortion",NT[NT.AnyEvents=1]="AnyEvents",NT[NT.AnyEventsIncludingUnfinished=2]="AnyEventsIncludingUnfinished";var FT=function(){function e(t,n){Tr(this,e),Er(this,"minEventsPortionToSend",50),Er(this,"maxEventsPortionToSend",100),Er(this,"pendingEvents",new Map),Er(this,"readyEvents",[]),Er(this,"hasInitializationFinished",!1),Er(this,"_canSendTelemetry",!1),this.config=t,this.packetInterface=n}return yr(e,[{key:"isTelemetryEnabled",get:function(){return this.config.confirmedCapabilities.has("telemetry.v1")}},{key:"canSendTelemetry",get:function(){return this._canSendTelemetry&&this.isTelemetryEnabled},set:function(e){bd.debug("TelemetryTracker.canSendTelemetry: ".concat(e," TelemetryTracker.isTelemetryEnabled: ").concat(this.isTelemetryEnabled)),this._canSendTelemetry&&!e&&(this.pendingEvents.clear(),this.readyEvents=[]),this._canSendTelemetry=e,e&&this.sendTelemetry(t.EventSendingLimitation.AnyEvents),e&&!this.hasInitializationFinished&&(this.hasInitializationFinished=!0)}},{key:"addTelemetryEvent",value:function(t){!this.canSendTelemetry&&this.hasInitializationFinished||this.readyEvents.push(t)}},{key:"addPartialEvent",value:function(e,n,r){bd.debug("Adding ".concat(r===t.TelemetryPoint.Start?"starting":"ending"," timepoint for '").concat(n,"' event"));var o=this.pendingEvents.has(n);if(r===t.TelemetryPoint.Start)o&&bd.debug("Overwriting starting point for '".concat(n,"' event")),this.pendingEvents.set(n,e);else{if(!o)return void bd.info("Could not find started event for '".concat(n,"' event"));this.addTelemetryEvent(this.merge(this.pendingEvents.get(n),e)),this.pendingEvents.delete(n)}}},{key:"getTelemetryToSend",value:function(e){return this.canSendTelemetry&&0!=this.readyEvents.length?e==t.EventSendingLimitation.MinEventsPortion&&this.readyEvents.length<this.minEventsPortionToSend?[]:this.getTelemetryPortion(e==t.EventSendingLimitation.AnyEventsIncludingUnfinished):[]}},{key:"getTelemetryPortion",value:function(t){var e=this,n=Math.min(this.readyEvents.length,this.maxEventsPortionToSend),r=this.readyEvents.splice(0,n);return t&&r.length<this.maxEventsPortionToSend&&this.pendingEvents.forEach((function(t,n){if(!(r.length>=e.maxEventsPortionToSend)){var o=e.pendingEvents.get(n);e.pendingEvents.delete(n),r.push(new BT("[UNFINISHED] ".concat(o.title),o.details,o.start,null,o.type,o.id))}})),r}},{key:"merge",value:function(t,e){return new BT(e.title?e.title:t.title,e.details?e.details:t.details,t.start,e.end,e.type?e.type:t.type,e.id?e.id:t.id)}},{key:"sendTelemetryIfMinimalPortionCollected",value:function(){this.sendTelemetry(t.EventSendingLimitation.MinEventsPortion)}},{key:"sendTelemetry",value:function(t){var e=this.getTelemetryToSend(t);if(0!==e.length)try{this.packetInterface.send(new Kv(e.map((function(t){return t.toTelemetryEvent()}))))}catch(t){bd.debug("Error while sending ".concat(e.length," telemetry events due to ").concat(t,"; they will be resubmitted")),this.readyEvents=this.readyEvents.concat(e)}}}]),e}();function UT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mr(t);if(e){var o=mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Sr(this,n)}}var WT=function t(){Tr(this,t)};Er(WT,"TWILSOCK_CONNECT","twilsock.sdk.connect"),Er(WT,"TWILSOCK_INIT","twilsock.sdk.init"),t.TwilsockClient=function(e){xr(TwilsockClient,e);var n,r,o,i,a,s,c,u,f=UT(TwilsockClient);function TwilsockClient(e,n,r){var o;Tr(this,TwilsockClient),Er(gr(o=f.call(this)),"version",cv),Er(gr(o),"offlineStorageDeferred",new IT),r.continuationToken=r.continuationToken?r.continuationToken:DT.getStoredToken(n);var i=o.config=new uv(e,n,r);bd.setLevel(i.logLevel);var a=new ZS(i.url),s=new JS(a,i);return o.channel=new YS(a,s,i),o.registrations=new tT(s),o.upstream=new PT(s,o.channel,i),o.telemetryTracker=new FT(i,s),o.channel.on("initialized",(function(){return o.telemetryTracker.canSendTelemetry=!0})),a.on("disconnected",(function(){return o.telemetryTracker.canSendTelemetry=!1})),o.registrations.on("registered",(function(t){return o.emit("registered",t)})),o.channel.on("message",(function(t,e){return setTimeout((function(){return o.emit("message",t,e)}),0)})),o.channel.on("stateChanged",(function(t){return setTimeout((function(){return o.emit("stateChanged",t)}),0)})),o.channel.on("connectionError",(function(t){return setTimeout((function(){return o.emit("connectionError",t)}),0)})),o.channel.on("tokenAboutToExpire",(function(){return setTimeout((function(){return o.emit("tokenAboutToExpire")}),0)})),o.channel.on("tokenExpired",(function(){return setTimeout((function(){return o.emit("tokenExpired")}),0)})),o.channel.on("connected",(function(){return o.registrations.updateRegistrations()})),o.channel.on("connected",(function(){return o.upstream.sendPendingMessages()})),o.channel.on("connected",(function(){return setTimeout((function(){return o.emit("connected")}),0)})),o.channel.on("beforeConnect",(function(){return o.telemetryTracker.addPartialEvent(new BT("Establish WebSocket connection","",new Date),WT.TWILSOCK_CONNECT,t.TelemetryPoint.Start)})),o.channel.on("connected",(function(){return o.telemetryTracker.addPartialEvent(new BT("Establish WebSocket connection","",new Date,new Date),WT.TWILSOCK_CONNECT,t.TelemetryPoint.End)})),o.channel.on("beforeSendInit",(function(){return o.telemetryTracker.addPartialEvent(new BT("Send Twilsock init","",new Date),WT.TWILSOCK_INIT,t.TelemetryPoint.Start)})),o.channel.on("initialized",(function(){return o.telemetryTracker.addPartialEvent(new BT("Send Twilsock init","Succeeded",new Date,new Date),WT.TWILSOCK_INIT,t.TelemetryPoint.End)})),o.channel.on("sendInitFailed",(function(){return o.telemetryTracker.addPartialEvent(new BT("Send Twilsock init","Failed",new Date,new Date),WT.TWILSOCK_INIT,t.TelemetryPoint.End)})),o.channel.on("initialized",(function(t){o.handleStorageId(n,t),DT.storeToken(t.continuationToken,n),setTimeout((function(){return o.emit("initialized",t)}),0)})),o.channel.on("disconnected",(function(){return setTimeout((function(){return o.emit("disconnected")}),0)})),o.channel.on("disconnected",(function(){return o.upstream.rejectPendingMessages()})),o.channel.on("disconnected",(function(){return o.offlineStorageDeferred.fail(new Nk("Client disconnected"))})),o.offlineStorageDeferred.promise.catch((function(){})),o}return yr(TwilsockClient,[{key:"emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return bd.debug("Emitting ".concat(t.toString(),"(").concat(r.map((function(t){return JSON.stringify(t)})).join(", "),")")),(e=br(mr(TwilsockClient.prototype),"emit",this)).call.apply(e,[this,t].concat(r))}},{key:"handleStorageId",value:function(t,e){if(e.offlineStorage)if(e.offlineStorage.hasOwnProperty(t))try{this.offlineStorageDeferred.set(jT.create(e.offlineStorage[t])),bd.debug("Offline storage for '".concat(t,"' product: ").concat(JSON.stringify(e.offlineStorage[t]),"."))}catch(n){this.offlineStorageDeferred.fail(new Nk("Failed to parse offline storage for ".concat(t," ").concat(JSON.stringify(e.offlineStorage[t]),". ").concat(n,".")))}else this.offlineStorageDeferred.fail(new Nk("No offline storage id for '".concat(t,"' product: ").concat(JSON.stringify(e.offlineStorage))));else this.offlineStorageDeferred.fail(new Nk("No offline storage id"))}},{key:"storageId",value:function(){return this.offlineStorageDeferred.promise}},{key:"isConnected",get:function(){return this.channel.isConnected}},{key:"state",get:function(){return this.channel.state}},{key:"updateToken",value:(u=dr(no.mark((function t(e){return no.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(bd.trace("updating token '".concat(e,"'")),this.config.token!==e){t.next=3;break}return t.abrupt("return");case 3:return this.config.updateToken(e),t.next=6,this.channel.updateToken(e);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"setNotificationsContext",value:(c=dr(no.mark((function t(e,n){return no.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.registrations.setNotificationsContext(e,n);case 2:case"end":return t.stop()}}),t,this)}))),function(t,e){return c.apply(this,arguments)})},{key:"removeNotificationsContext",value:(s=dr(no.mark((function t(e){return no.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.registrations.removeNotificationsContext(e);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"connect",value:function(){return this.channel.connect()}},{key:"disconnect",value:(a=dr(no.mark((function e(){return no.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.telemetryTracker.sendTelemetry(t.EventSendingLimitation.AnyEventsIncludingUnfinished),e.next=3,this.channel.disconnect();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"get",value:(i=dr(no.mark((function e(n,r,o){return no.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.telemetryTracker.sendTelemetry(t.EventSendingLimitation.AnyEvents),e.next=3,this.upstream.send("GET",n,r,void 0,o);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(t,e,n){return i.apply(this,arguments)})},{key:"post",value:(o=dr(no.mark((function e(n,r,o,i){return no.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.telemetryTracker.sendTelemetry(t.EventSendingLimitation.AnyEvents),e.next=3,this.upstream.send("POST",n,r,o,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(t,e,n,r){return o.apply(this,arguments)})},{key:"put",value:(r=dr(no.mark((function e(n,r,o,i){return no.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.telemetryTracker.sendTelemetry(t.EventSendingLimitation.AnyEvents),e.next=3,this.upstream.send("PUT",n,r,o,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(t,e,n,o){return r.apply(this,arguments)})},{key:"delete",value:(n=dr(no.mark((function e(n,r,o,i){return no.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.telemetryTracker.sendTelemetry(t.EventSendingLimitation.AnyEvents),e.next=3,this.upstream.send("DELETE",n,r,o,i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(t,e,r,o){return n.apply(this,arguments)})},{key:"addTelemetryEvent",value:function(t){this.telemetryTracker.addTelemetryEvent(t),this.telemetryTracker.sendTelemetryIfMinimalPortionCollected()}},{key:"addPartialTelemetryEvent",value:function(e,n,r){this.telemetryTracker.addPartialEvent(e,n,r),r===t.TelemetryPoint.End&&this.telemetryTracker.sendTelemetryIfMinimalPortionCollected()}}]),TwilsockClient}(Oi),t.TwilsockClient=function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":kr(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}([vd(pd,pd,[dd,"undefined",hd(null)]),function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":kr(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[String,String,Object])],t.TwilsockClient);var zT=function(){function t(e){Tr(this,t),this.product=e,this.type="ers",this.notification_protocol_version=0,this.message_types=[]}return yr(t,[{key:"populateInitRegistrations",value:function(t){var e=new Set(this.message_types);for(var n in t)e.add(t[n]);this.message_types=Array.from(e)}}]),t}();return t.InitRegistration=zT,t.TelemetryEventDescription=BT,t.TelemetryTracker=FT,t.TransportUnavailableError=RT,t.Twilsock=t.TwilsockClient,t.TwilsockError=Nk,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
